<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/894050/"> 894050</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/d43f760845f651b6f6540e876d442c368772c300">d43f760845f651b6f6540e876d442c368772c300</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/894053/">894053</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/aa97940795c76a35f754dcb0b01629567e3ab022">aa97940795c76a35f754dcb0b01629567e3ab022</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   d43f760845f651b6f6540e876d442c368772c300
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/d43f760845f651b6f6540e876d442c368772c300">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/d43f760845f651b6f6540e876d442c368772c300.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Xida Chen &lt;xidachen@chromium.org&gt;
  </td>
  <td>
   Sat Jun 19 01:29:22 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Sat Jun 19 01:29:22 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/d43f760845f651b6f6540e876d442c368772c300/">
    ae8451121c3a6aae4408c495c87e4e0a1ae12b3a
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/d43f760845f651b6f6540e876d442c368772c300%5E">
    0090f946308ab6000816c1b6553d79823354c994
   </a>
   <span>
    [
    <a href="/chromium/src/+/d43f760845f651b6f6540e876d442c368772c300%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[composite-bgcolor-animation] Return empty result when PaintWorkletInput not found

The root cause of the problem is that there is an early exit in the
DiscardableImageMap::GatherDiscardableImages(), happening when the
paint rect for the op is empty. This makes sense because there is
nothing to draw.

Note that this is different than the empty element case. In fact,
we already have "background-color-animation-zero-size-element.html"
under css-backgrounds/animations/ and there is no problem with that.
The bug happens when the element is not empty, but its intersection
with the SkCanvas that it draws into is empty. Please see the notes
in this doc for more details:
<a href="https://docs.google.com/document/d/1Da9d7ai5xt4nPX7NDZnqaaTSoFitRSeYxw1qxGjtdeQ/edit">https://docs.google.com/document/d/1Da9d7ai5xt4nPX7NDZnqaaTSoFitRSeYxw1qxGjtdeQ/edit</a>

The |PaintWorkletImageProvider::records_| contains the records for
all the discardable images that can draw. Meaning that the ones that
early exits won't be included in the |records_|. But, when the
PaintWorkletImageProvider::GetPaintRecordResult() is called, the
input parameter |PaintWorkletInput| would contain all possible
PaintWorkletInput that is passed from Blink to CC, which obviously
contains the ones that cannot draw. As a result, these
PaintWorkletInputs won't exists in the |records_|.

We handle these cases by returning an empty record because there
is nothing to draw (like empty container cases).

Bug: 1216210
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I9630aa4b55fd1322f641f42b05c20aab8c7234c7">I9630aa4b55fd1322f641f42b05c20aab8c7234c7</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2954479">https://chromium-review.googlesource.com/c/chromium/src/+/2954479</a>
Reviewed-by: Philip Rogers &lt;pdr@chromium.org&gt;
Reviewed-by: Robert Flack &lt;flackr@chromium.org&gt;
Commit-Queue: Xida Chen &lt;xidachen@chromium.org&gt;
Cr-Commit-Position: refs/heads/master@{#894050}
</pre>

</body>
</html>
