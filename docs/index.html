<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/924047/"> 924047</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/a067d67b6f95e177cc1f2298090debd5db2ab13f">a067d67b6f95e177cc1f2298090debd5db2ab13f</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/924007/">924007</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/8afb88ed99d210c6ff5b72275e361474f00834da">8afb88ed99d210c6ff5b72275e361474f00834da</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   a067d67b6f95e177cc1f2298090debd5db2ab13f
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/a067d67b6f95e177cc1f2298090debd5db2ab13f">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/a067d67b6f95e177cc1f2298090debd5db2ab13f.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Tomasz Wiszkowski &lt;ender@google.com&gt;
  </td>
  <td>
   Wed Sep 22 21:35:48 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Wed Sep 22 21:35:48 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/a067d67b6f95e177cc1f2298090debd5db2ab13f/">
    c58fabd7b189c7d914d100b0e2401ceb5d4640b0
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/a067d67b6f95e177cc1f2298090debd5db2ab13f%5E">
    e01361807dd4ad3a84a1db38639599717b4382b7
   </a>
   <span>
    [
    <a href="/chromium/src/+/a067d67b6f95e177cc1f2298090debd5db2ab13f%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Prevent bogus AutocompleteResult fetches during DeleteMatch flow.

This change prevents the DeleteMatch dialog from stealing Omnibox
focus, that results with AutocompleteResult data being cleared in
the SearchActivity, effectively preventing AutocompleteMatch objects
from being accurately identified.

The Window Focus event is emitted each time the dialog is shown or
closed, and these focus events appear to be emitting misleading signal
to the Url Bar, triggering autocomplete in the middle of a DeleteMatch
cycle. While newly presented suggestions may match the ones requested
to be deleted, it happens occasionally that these are different,
resulting with emission of Omnibox.InvalidMatch histogram.

The change
  * replaces window focus events with activity lifecycle events
    (which appears to be aligned with the original intention to focus
    the omnibox whenever the SearchActivity is in foreground)
  * prevents lingering DeleteDialogs when users leave/re-enter
    SearchActivity
  * prevents lingering DeleteDialogs when any Native event causes
    refresh of the Suggestions (which would cause DeleteMatch action
    invalid)
  * Simplifies the initialization flow for SearchActivity: delay
    until DSE promo is complete appears irrelevant, because the
    suggestions being offered on the old SearchActivity do not depend
    on the selection of the search engine.

Bug: 1244577
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I7326744379ad170af3b8c47a1ddfa669ce5f9ddf">I7326744379ad170af3b8c47a1ddfa669ce5f9ddf</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3171809">https://chromium-review.googlesource.com/c/chromium/src/+/3171809</a>
Commit-Queue: Tomasz Wiszkowski &lt;ender@google.com&gt;
Reviewed-by: Filip Gorski &lt;fgorski@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#924047}
</pre>

</body>
</html>
