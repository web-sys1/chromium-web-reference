<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1223407/"> 1223407</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/809d0117b1481d72f26368b6f29b08d91c08055f">809d0117b1481d72f26368b6f29b08d91c08055f</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1223410/">1223410</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/dcd7ca0723e55b499761b5f44309f7a02fba8f01">dcd7ca0723e55b499761b5f44309f7a02fba8f01</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   809d0117b1481d72f26368b6f29b08d91c08055f
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/809d0117b1481d72f26368b6f29b08d91c08055f">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/809d0117b1481d72f26368b6f29b08d91c08055f.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Aaron Leventhal &lt;aleventhal@chromium.org&gt;
  </td>
  <td>
   Sun Nov 12 20:08:12 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Sun Nov 12 20:08:12 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/809d0117b1481d72f26368b6f29b08d91c08055f/">
    03413c0650d35c37d729172da253e5c6727d0e72
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/809d0117b1481d72f26368b6f29b08d91c08055f%5E">
    762bbab70d93a24334aca9fd2ce1e47367183167
   </a>
   <span>
    [
    <a href="/chromium/src/+/809d0117b1481d72f26368b6f29b08d91c08055f%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Revert "[A11y] Do not allow asymmetrical parent-child relations in tree"

This reverts commit 0953e5a0ef7748af2c932568ec9d9bbdbc480f11.

Reason for revert: bug 1501535 (crashes on google.com when a11y active)

Original change's description:
&gt; [A11y] Do not allow asymmetrical parent-child relations in tree
&gt;
&gt; Design doc:
&gt; <a href="https://docs.google.com/document/d/1PnjhlWqTtivmsUVTF0kqMAUIsO9a_eTp32pRY4KJh_U/edit#heading=h.wlgzk7gh4m76">https://docs.google.com/document/d/1PnjhlWqTtivmsUVTF0kqMAUIsO9a_eTp32pRY4KJh_U/edit#heading=h.wlgzk7gh4m76</a>
&gt;
&gt; Fix failures brought to light by the Eager AX Tree Updates project and related checks, so that serialization operates on a truly frozen, complete AX Tree, and does not lead to changes to the underlying data at unsafe times. After landing this CL and any follow-ups, the goal is to have a vastly more stable, predictable Blink accessibility engine.
&gt;
&gt; The current implementation can lead to processing the tree when there
&gt; are "holes" in the data structure, such as missing parents or children,
&gt; which can lead to crashes, checks and unpredictability.
&gt;
&gt; 1. Avoid holes in the first place: do not call AXObject::ClearChildren() immediately when calling AXObject::SetNeedsToUpdateChildren(), so that missing parent and missing child holes are not created for unchanged siblings. These holes tended to sit around and cause problems when downstream operations did not expect them. Only call ClearChildren() right before rebuilding the children, in UpdateChildrenIfNecessary().
&gt; 2. More complete repairs: Instead of only repairing missing parents, when a parentless ensure a complete subtree structure around the child, starting with the included parent. The new method to accomplish this is called AXObjectCacheImpl::RepairIncludedParentsChildren(). It makes sure that every parent up to the included parent has a complete set of children.
&gt; 3. More timely repairs: instead of waiting for a hole to be discovered while tree walking, eagerly ensure that objects up to their included parent have repairs, whenever an object is being retrieved for deferred event processing, or when an object is being created in the middle of a tree. If the necessary parents do not exist, and thus the AXObject itself is not viable, make sure any stale AXObjects in that subtree are eagerly removed, because they are also not viable.
&gt; 4. More complete tree structure checks in AXObjectCacheImpl::CheckTreeIsUpdated(), which ensure symmetrical included parent-child relationships are complete. This helps guarantee that no lazy computations try to alter the tree while itâ€™s being serialized (in a frozen state). The new checks do not pass without the other code changes, which are in service of the new checks.
&gt;
&gt; Future work: attempt to avoid any tree repairs and guarantee completeness in more places, providing even more predictability, for example, by handling CSS display changes similarly to role changes.
&gt;
&gt; Fixed: 1422755,1483877,1482591,1481940,1480442,1488246,1486249,1484029,1353205,1480627,1480429,1494849,1493953,1484394,1489027,1491163
&gt; Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ied4258680ffe4099caaf4c5e614c59c70c61a013">Ied4258680ffe4099caaf4c5e614c59c70c61a013</a>
&gt; Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/4873421">https://chromium-review.googlesource.com/c/chromium/src/+/4873421</a>
&gt; Reviewed-by: Chris Harrelson &lt;chrishtr@chromium.org&gt;
&gt; Commit-Queue: Aaron Leventhal &lt;aleventhal@chromium.org&gt;
&gt; Cr-Commit-Position: refs/heads/main@{#1223164}

Fixed: 1501535
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I33d7aab81edacb151cadffeee0969df4591bd947">I33d7aab81edacb151cadffeee0969df4591bd947</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5021416">https://chromium-review.googlesource.com/c/chromium/src/+/5021416</a>
Commit-Queue: Aaron Leventhal &lt;aleventhal@chromium.org&gt;
Bot-Commit: Rubber Stamper &lt;rubber-stamper@appspot.gserviceaccount.com&gt;
Cr-Commit-Position: refs/heads/main@{#1223407}
</pre>

</body>
</html>
