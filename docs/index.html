<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1002997/"> 1002997</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/1636da313617a75187e92f1a80cbfe4d65e45eb9">1636da313617a75187e92f1a80cbfe4d65e45eb9</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1002995/">1002995</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/d5c0c90eaa2b841a13ddb985dde15cd86b631f8a">d5c0c90eaa2b841a13ddb985dde15cd86b631f8a</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   1636da313617a75187e92f1a80cbfe4d65e45eb9
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/1636da313617a75187e92f1a80cbfe4d65e45eb9">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/1636da313617a75187e92f1a80cbfe4d65e45eb9.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Yoshisato Yanagisawa &lt;yyanagisawa@chromium.org&gt;
  </td>
  <td>
   Fri May 13 05:22:11 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri May 13 05:22:11 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/1636da313617a75187e92f1a80cbfe4d65e45eb9/">
    50159c6beb8af029858875ba5574e96b33bbce3e
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/1636da313617a75187e92f1a80cbfe4d65e45eb9%5E">
    5940d17ca5fedd432311e584b8e448653a622dd3
   </a>
   <span>
    [
    <a href="/chromium/src/+/1636da313617a75187e92f1a80cbfe4d65e45eb9%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Reland "Properly account for fenced frames in crash visibility"

This reverts commit e391064aa942b88a0bd4e2eac57c88330aa575c4.

Reason for revert:
The root cause of the test failure has been resolved.
The test failed because MaybeLogCrash did not called when the crashed
frame became visible on Android.  Since MaybeLogCrash is called only
for visible frame, it was not called because the frame's viewport
intersection is empty and the frame was considered as invisible.

Unlike desktop, Android seems to need fencedframe height/width
explicitly set to make them recognized as visible.  I have updated
the browser test like so.

Original change's description:
&gt; Revert "Properly account for fenced frames in crash visibility"
&gt;
&gt; This reverts commit 9e927d34119ebe4faa62f6c0a3aef7d959380376.
&gt;
&gt; Reason for revert: crbug.com/1309482 - fails on multiple bots
&gt;
&gt; Original change's description:
&gt; &gt; Properly account for fenced frames in crash visibility
&gt; &gt;
&gt; &gt; Currently the browser may set CrashVisibility::kShownAfterCrashing to
&gt; &gt; UMA if the crash happens inside fenced frames.  That is because the
&gt; &gt; current code uses GetParent to track the ancestor frames.  Using
&gt; &gt; GetParent worked for iframes but fencedframe+MPArch should use
&gt; &gt; GetParentOrOuterDocument to track all the ancestor frames.
&gt; &gt;
&gt; &gt; For this case, we want to detect the ancestors are loading or not
&gt; &gt; for setting the proper crash visibility, and that should not be
&gt; &gt; a communication channel between fenced frames and the primary main
&gt; &gt; frame.
&gt; &gt;
&gt; &gt; Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ibdaaa07909c25cdda0b1d0532d14c495c2c6c800">Ibdaaa07909c25cdda0b1d0532d14c495c2c6c800</a>
&gt; &gt; Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3506953">https://chromium-review.googlesource.com/c/chromium/src/+/3506953</a>
&gt; &gt; Reviewed-by: Tsuyoshi Horo &lt;horo@chromium.org&gt;
&gt; &gt; Reviewed-by: Alexander Timin &lt;altimin@chromium.org&gt;
&gt; &gt; Commit-Queue: Yoshisato Yanagisawa &lt;yyanagisawa@chromium.org&gt;
&gt; &gt; Cr-Commit-Position: refs/heads/main@{#983664}
&gt;
&gt; Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I1d439cf7a6b56b724c447fefbc51ab66d81902a3">I1d439cf7a6b56b724c447fefbc51ab66d81902a3</a>
&gt; Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3545448">https://chromium-review.googlesource.com/c/chromium/src/+/3545448</a>
&gt; Bot-Commit: Rubber Stamper &lt;rubber-stamper@appspot.gserviceaccount.com&gt;
&gt; Commit-Queue: Andrey Zaytsev &lt;andzaytsev@google.com&gt;
&gt; Owners-Override: Andrey Zaytsev &lt;andzaytsev@google.com&gt;
&gt; Cr-Commit-Position: refs/heads/main@{#984363}

Bug: 1309482
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ib8d5eac3714642c338d6f69d2abbfc89e67ac004">Ib8d5eac3714642c338d6f69d2abbfc89e67ac004</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3552276">https://chromium-review.googlesource.com/c/chromium/src/+/3552276</a>
Reviewed-by: Bo Liu &lt;boliu@chromium.org&gt;
Reviewed-by: Rakina Zata Amni &lt;rakina@chromium.org&gt;
Commit-Queue: Yoshisato Yanagisawa &lt;yyanagisawa@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1002997}
</pre>

</body>
</html>
