<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1563913/"> 1563913</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5942eb2d639813e59b1fb6413248f114f1c9cf7c">5942eb2d639813e59b1fb6413248f114f1c9cf7c</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1563913/">1563913</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5942eb2d639813e59b1fb6413248f114f1c9cf7c">5942eb2d639813e59b1fb6413248f114f1c9cf7c</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   5942eb2d639813e59b1fb6413248f114f1c9cf7c
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/5942eb2d639813e59b1fb6413248f114f1c9cf7c">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/5942eb2d639813e59b1fb6413248f114f1c9cf7c.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Steve Becker &lt;stevebe@microsoft.com&gt;
  </td>
  <td>
   Fri Jan 02 17:54:27 2026
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Jan 02 17:54:27 2026
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/5942eb2d639813e59b1fb6413248f114f1c9cf7c/">
    5327a6dfe3d3a0c7720b0352f65972c01976de59
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/5942eb2d639813e59b1fb6413248f114f1c9cf7c%5E">
    5980162e8b05f062c896d01bad07686a1813d976
   </a>
   <span>
    [
    <a href="/chromium/src/+/5942eb2d639813e59b1fb6413248f114f1c9cf7c%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[DomStorage] Remove LevelDB dependencies from LocalStorageImplTest

Updates the local storage unit test to use the `DomStorageDatabase`
interface instead of directly reading and writing the LevelDB. Local
storage persists the following:

1. The database version. In prior changes, the database version became
an internal detail of the database implementation that is no exposed
directly to `LocalStorageImpl`. This change adds
`PutVersionForTesting()` to the `DomStorageDatabase` interface to
support existing local storage tests that simulate corrupt versions on
disk.

2. Map key/value pairs for each storage key using local storage. This
change adds functions `PutMapKeyValue()` and `ExpectMapEquals()` for
unit tests to read and write a map's key/value pairs.

3. Map usage metadata for each storage key using local storage. This
includes the last access time, last modified time and the total bytes
used. This change updates tests to use `PutMetadataSync()` and
`ReadAllMetadataSync()`.

Before the change, the test read and write LevelDB entries directly
using `GetDatabaseContents()` and `SetDatabaseEntry()`. Afterwards, it
must use the `DomStorageDatabase` interface through the functions above
to read/write the database version, map key/values and map usage
metadata.

Bug: 377242771
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I244ac7a1d4fc4eec341328d2c24bdb5ebdb2752d">I244ac7a1d4fc4eec341328d2c24bdb5ebdb2752d</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/7362239">https://chromium-review.googlesource.com/c/chromium/src/+/7362239</a>
Reviewed-by: Abhishek Shanthkumar &lt;abhishek.shanthkumar@microsoft.com&gt;
Commit-Queue: Steve Becker &lt;stevebe@microsoft.com&gt;
Cr-Commit-Position: refs/heads/main@{#1563913}
</pre>

</body>
</html>
