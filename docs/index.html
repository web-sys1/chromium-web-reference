<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1138341/"> 1138341</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e">c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1138322/">1138322</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/74215088870273b1be843aa744c4ed94960f476d">74215088870273b1be843aa744c4ed94960f476d</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Samuel Huang &lt;huangs@chromium.org&gt;
  </td>
  <td>
   Tue May 02 14:34:05 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Tue May 02 14:34:05 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e/">
    68d696523b3b1ecaf1854d17856b2bb6823c6e90
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e%5E">
    65eae534f51fa06600a57a3a36405a74e4305ea1
   </a>
   <span>
    [
    <a href="/chromium/src/+/c0d39e1bcca0da0f3be1d77d10f21b7cf35c658e%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[SuperSize] Add ARSC Count Metrics.

This CL adds ARSC metrics data (counts of types for each ARSC file) to
.size files, updates the Viewer to show them, and changes Metrics Tree
subcategories from "SIZE metrics" / "COUNT metrics" to "Size" / "Count".

In the Metrics View, items were previously classified as "ELF" or "DEX"
by checking whether or not the metric suffix (e.g., "SIZE/.text" =&gt;
".text") has  "." (e.g., ".text" has "." =&gt; "ELF"). However, we're now
adding "ARSC" to the mix, making the old scheme is obsolete.

The new classification scheme is to examine, for each metric item, the
extensions of associated files (files shown as table rows). For Chrome,
we consistently have ".so" =&gt; "ELF", ".dex"=&gt; "DEX", ".arsc" =&gt; "ARSC",
allowing easy classification. To handle edge cases, we also assign empty
extension =&gt; "ELF" and mixed / unknown extension =&gt; "OTHER".

Details:
* apk.py: CreateArscSymbols(): For each RES_TABLE_TYPE_TYPE chunk,
  create count metrics entry, e.g., "COUNT/anim" -&gt; 100.
* archive.py: _CreateContainerSymbols(): Add the above.
* ui-base.js: Add helper getFileExtension().
* state.js: Add metrics icon "arsc" and "other", reusing existing ones.
* metrics-tree-ui.js: MetricsTreeModel:
  * makeMetricNode(): Implement the new metric item classification
    scheme via file extensions.
  * extractAndStoreRoot(): Change subcategory names; create Sets of
    associated extensions for each metric item for classification.

Bug: 1064355
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I48b651c6e3dac87b1d8cdcb33617658c3db03653">I48b651c6e3dac87b1d8cdcb33617658c3db03653</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/4497008">https://chromium-review.googlesource.com/c/chromium/src/+/4497008</a>
Commit-Queue: Samuel Huang &lt;huangs@chromium.org&gt;
Reviewed-by: Andrew Grieve &lt;agrieve@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1138341}
</pre>

</body>
</html>
