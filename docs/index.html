<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1478322/"> 1478322</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/01c10d60b0e89eed54fdadbcc8737e449882e840">01c10d60b0e89eed54fdadbcc8737e449882e840</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1478324/">1478324</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/bba8da16b5d896d7b9a569429fab7ef9081f596c">bba8da16b5d896d7b9a569429fab7ef9081f596c</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   01c10d60b0e89eed54fdadbcc8737e449882e840
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/01c10d60b0e89eed54fdadbcc8737e449882e840">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/01c10d60b0e89eed54fdadbcc8737e449882e840.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Shin Kawamura &lt;kawasin@google.com&gt;
  </td>
  <td>
   Wed Jun 25 02:49:06 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Wed Jun 25 02:49:06 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/01c10d60b0e89eed54fdadbcc8737e449882e840/">
    adf286a4e818f39d83e2a315665e9364820f3a0f
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/01c10d60b0e89eed54fdadbcc8737e449882e840%5E">
    b789770e877cd40b374f77217675d241ce08b18c
   </a>
   <span>
    [
    <a href="/chromium/src/+/01c10d60b0e89eed54fdadbcc8737e449882e840%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Report all process termination from RenderProcessHost::Cleanup() as normal

When subframe in a page is intentionally removed and the renderer
process for the subframe is killed,
Stability.Android.ProcessedCrashCounts UMA metrics wrongly counts it as
oom.

The normal termination entrypoints of RenderProcessHost on Android are
Cleanup() and FastShutdownIfPossible(). On process failure or oom,
RenderProcessHost::OnChannelError() or
RenderProcessHost::OnProcessLaunchFailed() is executed.

On FastShutdown(), OnChannelError(), OnProcessLaunchFailed() cases,
RenderProcessHost::ProcessDied() triggers RenderProcessExited() observer
callback.

On Cleanup(), it calls FastShutdown() if applicable, otherwise it calls
RenderProcessExited() observer callback directly.

normal_termination on
ChildExitObserver::ProcessRenderProcessHostLifetimeEndEvent() have
missed the Cleanup() without FastShutdown() case and wrongly counted the
termination as not normal one.

I tested locally this change by removing a subframe (counted as "kill")
and killing a renderer process for a subframe (counted as "oom") and
check Stability.Android.ProcessedCrashCounts in chrome://histograms.

Bug: 426372421
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ic1d6e8af68f1401b5afe3d2a052b43c7707d1779">Ic1d6e8af68f1401b5afe3d2a052b43c7707d1779</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/6665326">https://chromium-review.googlesource.com/c/chromium/src/+/6665326</a>
Reviewed-by: Kameron Lutes &lt;kalutes@google.com&gt;
Commit-Queue: Shin Kawamura &lt;kawasin@google.com&gt;
Cr-Commit-Position: refs/heads/main@{#1478322}
</pre>

</body>
</html>
