<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1010118/"> 1010118</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/e77ee76d7033eccf8cb39c702452dbc3bb3f5338">e77ee76d7033eccf8cb39c702452dbc3bb3f5338</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1010091/">1010091</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5313975d6284188672a1df181632acdf35fb0b76">5313975d6284188672a1df181632acdf35fb0b76</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   e77ee76d7033eccf8cb39c702452dbc3bb3f5338
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/e77ee76d7033eccf8cb39c702452dbc3bb3f5338">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/e77ee76d7033eccf8cb39c702452dbc3bb3f5338.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Daniel Murphy &lt;dmurph@google.com&gt;
  </td>
  <td>
   Thu Jun 02 16:01:42 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Jun 02 16:01:42 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/e77ee76d7033eccf8cb39c702452dbc3bb3f5338/">
    73cfea448c58257a8eb7754ff063a756f823d5e6
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/e77ee76d7033eccf8cb39c702452dbc3bb3f5338%5E">
    5722a167a01759fc40d02e1c2f42638fd4d26778
   </a>
   <span>
    [
    <a href="/chromium/src/+/e77ee76d7033eccf8cb39c702452dbc3bb3f5338%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Reland "[dPWA] Install from sync command without the install task."

This is a reland of commit 5b1142444d85055d00d74d72263cfe905062cb05

The original change failed due to tests triggering uninstalls in a
flaky way. While this was unique to the test and was not in production
code, some CLs were split off to solve the 'wait until all operations
have completed' problem more holistically to prevent this type of
flakiness from appearing in the future. The split out CLs were:
* <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3682262">https://chromium-review.googlesource.com/c/chromium/src/+/3682262</a>
* <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3681702">https://chromium-review.googlesource.com/c/chromium/src/+/3681702</a>
* <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3669840">https://chromium-review.googlesource.com/c/chromium/src/+/3669840</a>

This change also added a few new features to help with the flakiness:
* The run loop in the command manager is now re-usable for multiple
  calls to await commands flushed.
* A few cleanups and upgrades to test code for better outputting.

Original change's description:
&gt; [dPWA] Install from sync command without the install task.
&gt;
&gt; This change pulls out the logic from the web_app_install_task and
&gt; manager for installing an app from sync and puts it into one command.
&gt; This allows quite a lot of simplification in the code and allows very
&gt; thorough testing.
&gt;
&gt; There are mostly no functional changes in this CL, mostly refactor. The
&gt; only functional change here is that other installations will no longer
&gt; be able to happen at the same time as sync installations. Hooray!
&gt;
&gt; Bug: 1298130
&gt; Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Iebdcdde76b53d856891d168b9d76b0a4cbc2b086">Iebdcdde76b53d856891d168b9d76b0a4cbc2b086</a>
&gt; Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3614659">https://chromium-review.googlesource.com/c/chromium/src/+/3614659</a>
&gt; Reviewed-by: Dominick Ng &lt;dominickn@chromium.org&gt;
&gt; Reviewed-by: Marc Treib &lt;treib@chromium.org&gt;
&gt; Commit-Queue: Daniel Murphy &lt;dmurph@chromium.org&gt;
&gt; Reviewed-by: Dibyajyoti Pal &lt;dibyapal@chromium.org&gt;
&gt; Reviewed-by: Phillis Tang &lt;phillis@chromium.org&gt;
&gt; Cr-Commit-Position: refs/heads/main@{#1007948}

Bug: 1298130
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I9a131c65fbe561ace732a3926c2a63cc7e1bf0b5">I9a131c65fbe561ace732a3926c2a63cc7e1bf0b5</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3674018">https://chromium-review.googlesource.com/c/chromium/src/+/3674018</a>
Auto-Submit: Daniel Murphy &lt;dmurph@chromium.org&gt;
Reviewed-by: Dominick Ng &lt;dominickn@chromium.org&gt;
Reviewed-by: Phillis Tang &lt;phillis@chromium.org&gt;
Reviewed-by: Dibyajyoti Pal &lt;dibyapal@chromium.org&gt;
Commit-Queue: Daniel Murphy &lt;dmurph@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1010118}
</pre>

</body>
</html>
