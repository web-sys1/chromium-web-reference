<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1150071/"> 1150071</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/affcc0f6a82271ace23d37e29f62c9576bcfad70">affcc0f6a82271ace23d37e29f62c9576bcfad70</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1150068/">1150068</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/423007163bbccd9f2f62ccfac2426793485fafb0">423007163bbccd9f2f62ccfac2426793485fafb0</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   affcc0f6a82271ace23d37e29f62c9576bcfad70
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/affcc0f6a82271ace23d37e29f62c9576bcfad70">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/affcc0f6a82271ace23d37e29f62c9576bcfad70.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Johannes Kron &lt;kron@chromium.org&gt;
  </td>
  <td>
   Sat May 27 14:32:41 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Sat May 27 14:32:41 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/affcc0f6a82271ace23d37e29f62c9576bcfad70/">
    17ca34e3b62c3caf43614f25e96a78a7100ced3d
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/affcc0f6a82271ace23d37e29f62c9576bcfad70%5E">
    5dd84ba03c7457ba2e42628b74637baedfcf23f7
   </a>
   <span>
    [
    <a href="/chromium/src/+/affcc0f6a82271ace23d37e29f62c9576bcfad70%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Update VideoTrackAdapter frame rate reduction logic

VideoTrackAdapter drops frames in order to make sure that the output frame rate is close to the target frame rate despite an arbitrary
input frame rate.

However, too many frames were dropped occasionally. After digging into this I've found that the logic was very sensitive to jitter in the
input.

If the input timestamps are 10 fps with the following pattern:
0, 10 ms, 200 ms, 210 ms, 400 ms, 410 ms, 600 ms, 610 ms,...

and the max fps is set to 5 fps, VideoTrackAdapter produced something
like this:
0, 400 ms, 1000 ms, 1800 ms, 2610 ms, 3800 ms, 4800 ms, 5800 ms,...

which is roughly 1 fps. With the current CL, the output is as expected:
0, 200 ms, 400 ms, 600 ms, 800 ms, etc.


Bug: chromium:1448046
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I71289a7a3986299c447e3d505cf07b52641e4aff">I71289a7a3986299c447e3d505cf07b52641e4aff</a>
Low-Coverage-Reason: Removing unused field.
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/4555847">https://chromium-review.googlesource.com/c/chromium/src/+/4555847</a>
Reviewed-by: Guido Urdaneta &lt;guidou@chromium.org&gt;
Commit-Queue: Johannes Kron &lt;kron@chromium.org&gt;
Reviewed-by: Mike West &lt;mkwst@chromium.org&gt;
Reviewed-by: Henrik Bostr√∂m &lt;hbos@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1150071}
</pre>

</body>
</html>
