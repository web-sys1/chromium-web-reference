<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1413876/"> 1413876</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/de2e71c166da06afebea3b9927f7146bcdd37440">de2e71c166da06afebea3b9927f7146bcdd37440</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1413868/">1413868</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/703b41467375ca1f407aa4d17084b26022ce629d">703b41467375ca1f407aa4d17084b26022ce629d</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   de2e71c166da06afebea3b9927f7146bcdd37440
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/de2e71c166da06afebea3b9927f7146bcdd37440">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/de2e71c166da06afebea3b9927f7146bcdd37440.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Charles Hager &lt;clhager@google.com&gt;
  </td>
  <td>
   Fri Jan 31 02:06:40 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Jan 31 02:06:40 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/de2e71c166da06afebea3b9927f7146bcdd37440/">
    a16d4593ffc39fa277c331881d252fff8cda2d0c
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/de2e71c166da06afebea3b9927f7146bcdd37440%5E">
    edb5c1aa60637b8722f2a87ddd4335772a982e26
   </a>
   <span>
    [
    <a href="/chromium/src/+/de2e71c166da06afebea3b9927f7146bcdd37440%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Show ModalDialogWrapper with on_destructed from AndroidDataControlsDialog

Pass the Android dialog's on_destructed to the ModalDialogWrapper to replace usage of AndroidDataControlsDialog::OnButtonClicked. AndroidDataControlsDialog::OnButtonClicked only existed to trigger the on_destructed when a button was clicked in addition to the base DataControlsDialog::OnDialogButtonClicked method.

This method ensures that the Android data controls dialog get properly destroyed whenever the modal dialog is destroyed, not just when the dialog is dismissed via a button clicked. Previously, if a modal dialog is dismissed not from native (e.g. due to a backswipe, tap outside the dialog, tab switch, etc), the data controls dialog would not be aware of it and the DataControlsDialogFactory would prevent showing future dialogs due to its mistaken belief that a dialog was already showing.

Bug: 385163723
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I6546ce8da9cb281591da6fc4a2f616bb5e5312c3">I6546ce8da9cb281591da6fc4a2f616bb5e5312c3</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/6216187">https://chromium-review.googlesource.com/c/chromium/src/+/6216187</a>
Reviewed-by: Joel Hockey &lt;joelhockey@chromium.org&gt;
Commit-Queue: Charles Hager &lt;clhager@google.com&gt;
Reviewed-by: Theresa Sullivan &lt;twellington@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1413876}
</pre>

</body>
</html>
