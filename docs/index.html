<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1017969/"> 1017969</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/506b3fd01b7db0277e580ab66abb594183cb121e">506b3fd01b7db0277e580ab66abb594183cb121e</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1017964/">1017964</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/4e2c5c5fa1b0e6a4ebc5e14361594fe847e7bce6">4e2c5c5fa1b0e6a4ebc5e14361594fe847e7bce6</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   506b3fd01b7db0277e580ab66abb594183cb121e
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/506b3fd01b7db0277e580ab66abb594183cb121e">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/506b3fd01b7db0277e580ab66abb594183cb121e.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Chen-Yu Tsai &lt;wenst@chromium.org&gt;
  </td>
  <td>
   Sat Jun 25 15:18:48 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Sat Jun 25 15:18:48 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/506b3fd01b7db0277e580ab66abb594183cb121e/">
    2249aadfd35c37f12c4570738fe5358f59c64520
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/506b3fd01b7db0277e580ab66abb594183cb121e%5E">
    7700eae915f2017006cd2509fb57e07a44befdac
   </a>
   <span>
    [
    <a href="/chromium/src/+/506b3fd01b7db0277e580ab66abb594183cb121e%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">media/gpu/v4l2/test: Split upstream compatible and ChromeOS code

Various parts of the V4L2 acceleration code conform to upstream
specifications. However, there are some parts that are ChromeOS
specific. These include support for pre-upstream, pre-finalized
stateless decoders, and DMAbuf offsets used in the encoders.

For the new v4l2_stateless_decoder test program, VP9 is finalized
and supported upstream, but AV1 is not.

Split the v4l2_stateless_decoder code along the "upstream compatible"
line, such that an upstream compatible test program can be built for
standard Linux.

Currently this involves either building natively with a sufficiently
recent set of kernel headers, or unpacking the latest (5.17.x as of
this writing) linux-libc-dev package into the sysroots by hand:

    wget <a href="http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_amd64.deb">http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_amd64.deb</a>
    dpkg-deb -X linux-libc-dev_5.18.5-1_amd64.deb build/linux/debian_bullseye_amd64-sysroot/
    wget <a href="http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_arm64.deb">http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_arm64.deb</a>
    dpkg-deb -X linux-libc-dev_5.18.5-1_arm64.deb build/linux/debian_bullseye_arm64-sysroot/
    wget <a href="http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_armhf.deb">http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_armhf.deb</a>
    dpkg-deb -X linux-libc-dev_5.18.5-1_armhf.deb build/linux/debian_bullseye_arm-sysroot/
    wget <a href="http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_i386.deb">http://ftp.us.debian.org/debian/pool/main/l/linux/linux-libc-dev_5.18.5-1_i386.deb</a>
    dpkg-deb -X linux-libc-dev_5.18.5-1_i386.deb build/linux/debian_bullseye_i386-sysroot/

For arm64, the amd64 headers also need to be updated, as V8 snapshot is
currently built for amd64, and for some reason the V4L2 stuff is built,
even though it is not used. Same goes for armhf and i386.

This allows building the v4l2_stateless_decoder test program for testing
V4L2 stateless VP9 video decoding on standard Linux, which would allow
partners and the broader ecosystem to test and compare Chromium V4L2
decoder implementations against others, such as Gstreamer or FFmpeg.

To test, build v4l2_stateless_decoder for arm64 linux with above header
updates and the following GN args:

    use_v4l2_codec=true proprietary_codecs=true ffmpeg_branding="Chrome"

Bug: none
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ic173b249635ad9ea219645df1d61e1044f92d943">Ic173b249635ad9ea219645df1d61e1044f92d943</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3721937">https://chromium-review.googlesource.com/c/chromium/src/+/3721937</a>
Commit-Queue: Chen-Yu Tsai &lt;wenst@chromium.org&gt;
Reviewed-by: Miguel Casas-Sanchez &lt;mcasas@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1017969}
</pre>

</body>
</html>
