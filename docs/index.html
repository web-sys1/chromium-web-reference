<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1113472/"> 1113472</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/04d67a68bcff8748c9c7e467f18ec4afb6245966">04d67a68bcff8748c9c7e467f18ec4afb6245966</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1113411/">1113411</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/924868e1b1f7e37453409ac5e4d2c0c9a3db305e">924868e1b1f7e37453409ac5e4d2c0c9a3db305e</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   04d67a68bcff8748c9c7e467f18ec4afb6245966
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/04d67a68bcff8748c9c7e467f18ec4afb6245966">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/04d67a68bcff8748c9c7e467f18ec4afb6245966.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Elly Fong-Jones &lt;ellyjones@chromium.org&gt;
  </td>
  <td>
   Mon Mar 06 18:31:51 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Mon Mar 06 18:31:51 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/04d67a68bcff8748c9c7e467f18ec4afb6245966/">
    32d568cb2c2905a834dce1908e88d8709f23d74e
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/04d67a68bcff8748c9c7e467f18ec4afb6245966%5E">
    d21fda7f20aead160117885ee5c35ebb32ae3a24
   </a>
   <span>
    [
    <a href="/chromium/src/+/04d67a68bcff8748c9c7e467f18ec4afb6245966%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">link-to-text: don't gratuitously delete observer

In fc3d43780a92373fe3e349e1460569cc261597d5 a special case was added to
destroy LinkToTextMenuObserver when it is "no longer needed", which
specifically happens in OnMenuClosed(). That method is called whenever
the MenuItemView is about to be torn down. However, LinkToTextMenuObserver
is *not* owned by the MenuItemView - it is owned by the MenuModel, and
it is perfectly legal for the same MenuModel to be reused for multiple
MenuItemViews. In fact, RenderViewContextMenu has exactly this behavior.

As a result, if the MenuView is ever hidden, LinkToTextMenuObserver will
self-destruct, but still have the items it created inside the backing
MenuModel, leading to the linked bug. This happens whenever the
RenderViewContextMenu is updated, because
ToolkitDelegateViews::RebuildMenu just rebuilds the entire MenuItemView
whenever the menu is updated.

Bug: 1290429
Fixed: 1406009
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ic8f2991035b8fa8b6af33ab242b7dec18fcdd2e7">Ic8f2991035b8fa8b6af33ab242b7dec18fcdd2e7</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/4310200">https://chromium-review.googlesource.com/c/chromium/src/+/4310200</a>
Reviewed-by: Peter Bostr√∂m &lt;pbos@chromium.org&gt;
Reviewed-by: Avi Drissman &lt;avi@chromium.org&gt;
Commit-Queue: Elly Fong-Jones &lt;ellyjones@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1113472}
</pre>

</body>
</html>
