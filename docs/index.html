<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/858291/"> 858291</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/0cbab65e0a93e033935e339980e50588d85968df">0cbab65e0a93e033935e339980e50588d85968df</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/858300/">858300</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5704813b064370530b15b440ef1b949ca963282c">5704813b064370530b15b440ef1b949ca963282c</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   0cbab65e0a93e033935e339980e50588d85968df
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/0cbab65e0a93e033935e339980e50588d85968df">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/0cbab65e0a93e033935e339980e50588d85968df.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   James Vecore &lt;vecore@google.com&gt;
  </td>
  <td>
   Fri Feb 26 21:44:33 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Feb 26 21:44:33 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/0cbab65e0a93e033935e339980e50588d85968df/">
    32e158df449b9ac38369838897b6b8abcf880fab
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/0cbab65e0a93e033935e339980e50588d85968df%5E">
    efdfd4d598a3e19f990410dba12926eccddd6f6a
   </a>
   <span>
    [
    <a href="/chromium/src/+/0cbab65e0a93e033935e339980e50588d85968df%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[Nearby] Uncoupled RegisterForegroundReceiveSurface from Advertising

This CL fixes a regression: crbug/1182509 introduced in this CL:
<a href="https://crrev.com/c/2686763.">https://crrev.com/c/2686763.</a>

In the case of a new user on boarding, the user finishes setup which
enables Nearby Share and start the utility process. The utility process
starts advertising when the users settings allow it. The UI would then
register the foreground surface and wait for a start advertising result
before showing the high viz page. However, advertising was already
running so no callback would happen and the UI would hang waiting for
the register surface callback to finish.

This fix always resolves the register surface callback without waiting
for an advertisement result that might not come. A follow up CL will
be necessary to ensure every case of high-viz failure is accounted for
(see 1182827).

This also happens to fix the aspect issue for the pulse animation at
the same time.

Fixed: 1182509, 1181927
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Idda07dd5c55f7545c4c89022a3079bf2cda8ddb8">Idda07dd5c55f7545c4c89022a3079bf2cda8ddb8</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2723217">https://chromium-review.googlesource.com/c/chromium/src/+/2723217</a>
Commit-Queue: James Vecore &lt;vecore@google.com&gt;
Reviewed-by: Josh Nohle &lt;nohle@chromium.org&gt;
Cr-Commit-Position: refs/heads/master@{#858291}
</pre>

</body>
</html>
