<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1064548/"> 1064548</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/dcfba32d18447026dabaa1e174b798347deab863">dcfba32d18447026dabaa1e174b798347deab863</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1064502/">1064502</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/aafc68d7b7e792dba1e757d61d2ed97a5ff558ea">aafc68d7b7e792dba1e757d61d2ed97a5ff558ea</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   dcfba32d18447026dabaa1e174b798347deab863
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/dcfba32d18447026dabaa1e174b798347deab863">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/dcfba32d18447026dabaa1e174b798347deab863.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Morten Stenshorne &lt;mstensho@chromium.org&gt;
  </td>
  <td>
   Thu Oct 27 21:29:15 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Oct 27 21:29:15 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/dcfba32d18447026dabaa1e174b798347deab863/">
    e3e358a28b63a2a49db0390dc701a5acb83ce0c6
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/dcfba32d18447026dabaa1e174b798347deab863%5E">
    bf298c18a0f5335ec8fc134fff6cba42520cbbed
   </a>
   <span>
    [
    <a href="/chromium/src/+/dcfba32d18447026dabaa1e174b798347deab863%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Ignore repeated table sections in the block fragmentation machinery.

This means adjusting the fragmentainer block-offset to where it would
have been without any repeated table header, and shrink the
fragmentainer block-size to exclude both the repeated header and the
repeated footer (if any).

We used to end up in an infinite loop if there was tall monolithic
content after a repeated header, because we'd allow a break before it,
even if we hadn't placed any content yet. But if the fragmentainer
block-offset is 0 at this point, we'll refuse to break. We either need a
positive fragmentainer block-offset, or at the very least, already
having laid out some content (even if it has zero block-size), in order
to allow a break. We had similar problems with repeated headers when
border-spacing was larger than the block-size of the fragmentainer.
In addition to the block-size of the header itself, just exclude
border-spacing preceding the repeated header and the border-spacing
that comes after the repeated header, so that whatever (a non-repeated
section) comes right after that is seen as the start of the
fragmentainer (lest we be tempted to break there).

The correctness test included isn't very spectacular (although it neither freezes nor shows any red), since the repeated header had to be
invisible, in order not to trigger crbug.com/1378607 . We create too
many fragments in this case, because there's some problem with the table
layout code that doesn't handle fragmentainer overflow correctly,
resulting in a taller table than what we should have, and therefore
excess fragmentainers.

Bug: 1378576, 1378661
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I938cb01a83d293bef5e8953248b726f01353dcb3">I938cb01a83d293bef5e8953248b726f01353dcb3</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3981856">https://chromium-review.googlesource.com/c/chromium/src/+/3981856</a>
Reviewed-by: Alison Maher &lt;almaher@microsoft.com&gt;
Commit-Queue: Morten Stenshorne &lt;mstensho@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1064548}
</pre>

</body>
</html>
