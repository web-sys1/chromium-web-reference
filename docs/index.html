<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1389388/"> 1389388</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/397756f94c9fa8705a75a45ba5655617e0f5cc13">397756f94c9fa8705a75a45ba5655617e0f5cc13</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1389379/">1389379</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/6bcac01ae21d879cedf978daeaa2d60e48360469">6bcac01ae21d879cedf978daeaa2d60e48360469</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   397756f94c9fa8705a75a45ba5655617e0f5cc13
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/397756f94c9fa8705a75a45ba5655617e0f5cc13">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/397756f94c9fa8705a75a45ba5655617e0f5cc13.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Noémie St-Onge &lt;noemies@google.com&gt;
  </td>
  <td>
   Thu Nov 28 14:30:03 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Nov 28 14:30:03 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/397756f94c9fa8705a75a45ba5655617e0f5cc13/">
    7616dff5bc832d4ebe760a7a96a0c325f2ecd438
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/397756f94c9fa8705a75a45ba5655617e0f5cc13%5E">
    042a658284485b4daf70718a843ba990ea2e3b2a
   </a>
   <span>
    [
    <a href="/chromium/src/+/397756f94c9fa8705a75a45ba5655617e0f5cc13%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[iOS] Handle nil user email in the CPE

This CL fixes a crash that happens when we're trying to display the user
email address in the passkey enrollement welcome screen, but the email
address (fetched from Keychain) is nil.

This can happen for 2 reasons:

1) The user tried to use or create a passkey with the CPE after they've
upgraded Chrome from a version without passkeys to a version with
passkeys, but hasn't opened Chrome yet (and so no email has been stored
to Keychain yet).

2) There was an error when storing or reading the email from Keychain.

To prevent the crash from happening, this CL shows the "signed out"
alert screen instead of the passkey enrollmentt welcome screen when the
user email address is not valid.

This CL also improves the `CredentialProviderService::SyncStore` logic
as the current one could lead to having invalid account info (gaia and
user email) more often.

Fixed: 381025110
Bug: 381284523
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ide894147c21212400c00fa0541957d0f563c1d62">Ide894147c21212400c00fa0541957d0f563c1d62</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/6056166">https://chromium-review.googlesource.com/c/chromium/src/+/6056166</a>
Commit-Queue: Noémie St-Onge &lt;noemies@google.com&gt;
Reviewed-by: Alexis Hétu &lt;sugoi@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1389388}
</pre>

</body>
</html>
