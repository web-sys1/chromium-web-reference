<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1243410/"> 1243410</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/9585b65e984e3a9b1d40558b0349db083f204cfa">9585b65e984e3a9b1d40558b0349db083f204cfa</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1243399/">1243399</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/90beef92e8fdca22bfcc60089a2063922f18ca21">90beef92e8fdca22bfcc60089a2063922f18ca21</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   9585b65e984e3a9b1d40558b0349db083f204cfa
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/9585b65e984e3a9b1d40558b0349db083f204cfa">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/9585b65e984e3a9b1d40558b0349db083f204cfa.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Nick Diego Yamane &lt;nickdiego@igalia.com&gt;
  </td>
  <td>
   Fri Jan 05 14:42:11 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Jan 05 14:42:11 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/9585b65e984e3a9b1d40558b0349db083f204cfa/">
    17e61f1c77d4639bc8a21638432aff8f8fa0b9f4
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/9585b65e984e3a9b1d40558b0349db083f204cfa%5E">
    4a798e8eb39b2d269efa646b5b95702f7889d389
   </a>
   <span>
    [
    <a href="/chromium/src/+/9585b65e984e3a9b1d40558b0349db083f204cfa%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">wayland: dnd: move data fetching out of main thread

So far, in incoming data drag sessions - ie: when drag is originated
in external clients other than the ozone/wayland embedder - the data for
each offered mime type is incrementally fetched in the main/ui thread
using wl_display.sync callbacks. i.e: several wayland roundtrips
potentially required to "announce" the drag enter to the upper layers.
That is sub-optimal and has some side effects related to event
propagation which has been the source of subtle and sometime hard to
diagnose issues.

With this change, the data reading is offloaded to a separate thread and
related tests are updated accordingly. For now, DragEnter keeps coupled
to DataFetchCompleted. That will be addressed in a separate CL.

Design/Explainer: <a href="https://github.com/nickdiego/chromium-docs/blob/main/wl-dnd-data-fetch/explainer.md">https://github.com/nickdiego/chromium-docs/blob/main/wl-dnd-data-fetch/explainer.md</a>

Bug: 1487784
Test: relevant ozone_unittests updated accordingly.
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I6ff692f2d6364091fb45c14034b2e839a3ab8e49">I6ff692f2d6364091fb45c14034b2e839a3ab8e49</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5039167">https://chromium-review.googlesource.com/c/chromium/src/+/5039167</a>
Reviewed-by: Antonio Gomes &lt;tonikitoo@igalia.com&gt;
Commit-Queue: Nick Yamane &lt;nickdiego@igalia.com&gt;
Cr-Commit-Position: refs/heads/main@{#1243410}
</pre>

</body>
</html>
