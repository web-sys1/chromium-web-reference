<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1032492/"> 1032492</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/e9c5f7c33a327666313f0268ff07f6a99d967de3">e9c5f7c33a327666313f0268ff07f6a99d967de3</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1032479/">1032479</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/a83bf7bba95535d6d802a364a3e42f23ac074ad1">a83bf7bba95535d6d802a364a3e42f23ac074ad1</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   e9c5f7c33a327666313f0268ff07f6a99d967de3
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/e9c5f7c33a327666313f0268ff07f6a99d967de3">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/e9c5f7c33a327666313f0268ff07f6a99d967de3.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Andreu Botella &lt;abotella@igalia.com&gt;
  </td>
  <td>
   Mon Aug 08 10:27:23 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Mon Aug 08 10:27:23 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/e9c5f7c33a327666313f0268ff07f6a99d967de3/">
    8198ebe796a8b70b1aa2884596072aa3b3eb68d2
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/e9c5f7c33a327666313f0268ff07f6a99d967de3%5E">
    5be9178d7c969a0a4c7de3bb823dfff8ac94ba63
   </a>
   <span>
    [
    <a href="/chromium/src/+/e9c5f7c33a327666313f0268ff07f6a99d967de3%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Fix computation of caret rect alignment when unicode-bidi: plaintext

In |NGCaretRect::ComputeLocalCaretRectAtTextOffset|, the caret position
corresponding to that text offset is first computed, and then it is
clamped to a bounding box that depends on the line box rect and the
line's container. This bounding box depends on the line's text
alignment, as computed by the |ShouldAlignCaretRight| function.

However, the |should_align_caret_right| variable has an additional
condition, such that if the unicode-bidi CSS property is set to
plaintext, that variable can only be true if the cursor is in an LTR
text fragment, regardless of the text alignment. There are no comments
explaining why this extra condition is needed, and it seems to have
been added as part of <a href="https://crrev.com/c/2234323">https://crrev.com/c/2234323</a> with no reasoning
attached.

This extra condition makes |should_align_caret_right| be false whenever
the cursor is pointing into RTL text, which can make a difference as
shown in the added test. It is also the underlying cause behind
<a href="https://crbug.com/1278559.">https://crbug.com/1278559.</a> This patch removes this condition.

Bug: 1349390
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I0167a4259bf65a10a3f3694d431bbe5421ab6425">I0167a4259bf65a10a3f3694d431bbe5421ab6425</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3805880">https://chromium-review.googlesource.com/c/chromium/src/+/3805880</a>
Reviewed-by: Koji Ishii &lt;kojii@chromium.org&gt;
Commit-Queue: Andreu Botella &lt;abotella@igalia.com&gt;
Reviewed-by: Yoshifumi Inoue &lt;yosin@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1032492}
</pre>

</body>
</html>
