<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/985312/"> 985312</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/55b418c868a6959ce69a6205e38ecb74a0b27317">55b418c868a6959ce69a6205e38ecb74a0b27317</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/985308/">985308</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/862c3ee10b095ef7d51c100cd7e7061be57be789">862c3ee10b095ef7d51c100cd7e7061be57be789</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   55b418c868a6959ce69a6205e38ecb74a0b27317
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/55b418c868a6959ce69a6205e38ecb74a0b27317">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/55b418c868a6959ce69a6205e38ecb74a0b27317.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Friedrich Horschig &lt;fhorschig@chromium.org&gt;
  </td>
  <td>
   Fri Mar 25 15:42:44 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Mar 25 15:42:44 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/55b418c868a6959ce69a6205e38ecb74a0b27317/">
    041be4c1adec57ac581c06d0573a9a045620e50b
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/55b418c868a6959ce69a6205e38ecb74a0b27317%5E">
    f2e651757e1a2fc98583fe5c5c6499674d4d54d3
   </a>
   <span>
    [
    <a href="/chromium/src/+/55b418c868a6959ce69a6205e38ecb74a0b27317%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[Android][UPM] Change main backend in proxy based on sync status

With this change, the proxy redirects all requests to a backend that is
considered the main backend. Since the main backend doesn't depend only
on the feature anymore but also on the sync status, this can change
multiple times during an active session.

Changing to the built-in backend is always safe. It is always available
and does not need migration since it is kept up-to-date by sync.
Orthogonally, local data may need to be mirrored to the built-in backend
so that making this backend the primary sourcedoes not revert any
changes to local-only data.

Changing to the Android backend (i.e. a downstream implementation like
GMS) behaves similar. Although it requires a migration, all syncable
data is managed by sync and a request that would be faster than sync
can be resolved as if the request came from a different device.
Changes to local-only data can happen after that point. A conflict
in changes to local data is extremely unlikely since that would mean
that sync gets enabled while the user triggers an Add/Update to that
data.


The sync delegate should always be provided by the built-in backend
while it keeps running in the background.
Similarly, Initialization and Shutdown don't care about the primary
backend and always need to be executed for each backend. Only which
backend is responsible to forward remote changes should change by
sync status. This will be done in a follow-up.
(For now, the built-in backend can handle that event since sync
will trigger the change indirectly.)

Bug: 1303600, 1279341
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I97a227dc07359fa220ba30bc1f61aac593be345f">I97a227dc07359fa220ba30bc1f61aac593be345f</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3549040">https://chromium-review.googlesource.com/c/chromium/src/+/3549040</a>
Reviewed-by: Mohamed Amir Yosef &lt;mamir@chromium.org&gt;
Commit-Queue: Friedrich Horschig &lt;fhorschig@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#985312}
</pre>

</body>
</html>
