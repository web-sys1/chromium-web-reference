<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1562523/"> 1562523</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/b58088075ca7d283faeac360c13eea77f17ad84c">b58088075ca7d283faeac360c13eea77f17ad84c</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1562522/">1562522</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/c49abccbe4f03205719d495007c8d418baf124e6">c49abccbe4f03205719d495007c8d418baf124e6</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   b58088075ca7d283faeac360c13eea77f17ad84c
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/b58088075ca7d283faeac360c13eea77f17ad84c">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/b58088075ca7d283faeac360c13eea77f17ad84c.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Mohannad Farrag &lt;aymanm@google.com&gt;
  </td>
  <td>
   Wed Dec 24 20:28:38 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Wed Dec 24 20:28:38 2025
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/b58088075ca7d283faeac360c13eea77f17ad84c/">
    8beb01ede79de28ac026756a26d7970fdbd5c6cf
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/b58088075ca7d283faeac360c13eea77f17ad84c%5E">
    c49abccbe4f03205719d495007c8d418baf124e6
   </a>
   <span>
    [
    <a href="/chromium/src/+/b58088075ca7d283faeac360c13eea77f17ad84c%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Refactor X509Util

Refactor X509Util to become more readable and easily adjustable for
future changes. The refactor of the X509Util follows the following
structure:

1. Global immutable fields have all been moved to X509Globals singleton
class. This class is a replacement for `ensureInitialized` and
`ensureTestInitialized` madness. Fields which are test-only are
initialized lazily (e.g. `getTestKeyStore`).

2. Created CertificateVerification class. This is supposed to hold the
trustManager, and few additional fields necessary for the certificate
verification process. It's important to note that there're two instances
of this class. One for testing purposes and the other for production
purposes.

3. Moved the testing logic from `verifyServerCertificates`, and
`getUserAddedRoots` one layer above. This is necessary to ensure that
there are two CertificateVerification objects that are completely
unrelated to each other and can be updates separately.

4. Since `ensureInitialized` has been removed, the default certificate
verification field can be used via `getVerifier()` which will create
the field if it's null, otherwise use whatever is there. The test one
must be initialized by calling the test methods.

5. It's important to note that everything still happens under `sLock`,
and nothing has changed in terms of concurrency.

Bug: 460097895
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I66419f1a0875683f4639bd04844aa99068acf3d2">I66419f1a0875683f4639bd04844aa99068acf3d2</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/7146276">https://chromium-review.googlesource.com/c/chromium/src/+/7146276</a>
Auto-Submit: Mohannad Farrag &lt;aymanm@google.com&gt;
Commit-Queue: Mohannad Farrag &lt;aymanm@google.com&gt;
Reviewed-by: David Benjamin &lt;davidben@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1562523}
</pre>

</body>
</html>
