<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/962800/"> 962800</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/9edcefd0c2590ae1bcb71118b1378c0ad54f143f">9edcefd0c2590ae1bcb71118b1378c0ad54f143f</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/962795/">962795</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/769424beca1206977d2b03641c3bc7ac76108fa5">769424beca1206977d2b03641c3bc7ac76108fa5</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   9edcefd0c2590ae1bcb71118b1378c0ad54f143f
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/9edcefd0c2590ae1bcb71118b1378c0ad54f143f">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/9edcefd0c2590ae1bcb71118b1378c0ad54f143f.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   yjliu &lt;yjliu@chromium.org&gt;
  </td>
  <td>
   Tue Jan 25 02:00:33 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Tue Jan 25 02:00:33 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/9edcefd0c2590ae1bcb71118b1378c0ad54f143f/">
    e769dd607b3d13a9c2e5d8cabde4812065b814e4
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/9edcefd0c2590ae1bcb71118b1378c0ad54f143f%5E">
    c4fce84cd9df330bedad6c28adc16738b8ee8a97
   </a>
   <span>
    [
    <a href="/chromium/src/+/9edcefd0c2590ae1bcb71118b1378c0ad54f143f%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[lacros] server side implementation for frame throttling.

This CL adds a window property (ash::kFrameRateThrottleKey).
ash::FrameThrottlingController sets the property to true/false to notify
of throttle/unthrottle of a window. exo::ShellSurfaceBase, as an
aura::WindowObserer, observes the property change with
OnWindowPropertyChanged(). Upon receiving such a property change event,
exo::ShellSurfaceBase instructs the root surface (exo::Surface) to
throttle/unthrottle. In turn, the AuraSurface, as an observer of the
root surface, issues a wayland zaura event to the client (lacros).

To properly throttle a lacros window, there are two pieces:
1. Lacros's viz needs to reduce the BeginFrame rate (defaults to 20fps
currently). This has been done in the client side work CL (through
aura::HostFrameRateThrottler to issue an IPC call to viz). This CL
plumbs to the client through zaura surface interfaces.

2. Ash's viz needs to match the BeginFrame rate on the same frame sink
of the lacros surface being throttled. This will also fix the metrics
error, otherwise Ash's viz would be wrongly expecting the same surface
to submit at full rate and consider the client to has missed
submissions.

Bug: 1218872
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I3717bcebae3410506cc7d09138d6c9fb78c2b771">I3717bcebae3410506cc7d09138d6c9fb78c2b771</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3388757">https://chromium-review.googlesource.com/c/chromium/src/+/3388757</a>
Reviewed-by: Scott Violet &lt;sky@chromium.org&gt;
Reviewed-by: Mitsuru Oshima &lt;oshima@chromium.org&gt;
Commit-Queue: Jun Liu &lt;yjliu@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#962800}
</pre>

</body>
</html>
