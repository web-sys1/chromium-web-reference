<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/907511/"> 907511</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/917594a9b99a4db770974f58ffe0d5d0e1f0073d">917594a9b99a4db770974f58ffe0d5d0e1f0073d</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/907505/">907505</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/eaa5303ef339e963871904882a2d93b0cad145cb">eaa5303ef339e963871904882a2d93b0cad145cb</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   917594a9b99a4db770974f58ffe0d5d0e1f0073d
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/917594a9b99a4db770974f58ffe0d5d0e1f0073d">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/917594a9b99a4db770974f58ffe0d5d0e1f0073d.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Anders Hartvoll Ruud &lt;andruud@chromium.org&gt;
  </td>
  <td>
   Mon Aug 02 12:12:20 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Mon Aug 02 12:12:20 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/917594a9b99a4db770974f58ffe0d5d0e1f0073d/">
    3119979f0ea8aae7f17c74c0b6d941336ca39ec8
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/917594a9b99a4db770974f58ffe0d5d0e1f0073d%5E">
    8db2b6f1d6dd1a1873c0f5180c7e1c14d78eddf4
   </a>
   <span>
    [
    <a href="/chromium/src/+/917594a9b99a4db770974f58ffe0d5d0e1f0073d%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Store base ComputedStyle on main ComputedStyle (reland)

Instead of storing the base ComputedStyle on ElementAnimations, this
CL suggesting storing it on the (animated) ComputedStyle itself.
Any animated ComputedStyle produced by StyleResolver gets an associated
"StyleBaseData" object, which contains the base ComputedStyle and
the base "important set".

Even without other considerations, this appears to be far simpler to
deal with than storing it "on the side", however, the true motivation
for this change is related to container queries:

Since container queries can run style recalc multiple times for the
same element, we essentially pass through multiple style resolves where
the "old style" (i.e. current style on the Element) changes each time.
In other words, there can be multiple apparent "old styles" (some older
than others). In order to deal with transitions correctly, it's
necessary to get the *base style* of the *oldest* of the old styles
(so to speak). Having to keep track of the "true old style" and
"true old *base* style" separately exceeds my pain threshold. It seems
far more sensible to simply make the base style of any ComputedStyle
reachable from *that* ComputedStyle. That way we only need to keep
track of *one* ComputedStyle to access either the animated style,
or the associated base style.

For now this field needs to be stored on ComputedStyle directly.
If it's buried deep in some rare data, we need to copy-on-write
too many internal structures for every animation frame.

This increases sizeof(ComputedStyle) by one pointer, but I made room
for that recently by decreasing its size by one pointer and one
unsigned.

Bug: 1180159
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Iccfd9ad27a9f2ede60d02f5eee9027ae1243cd9a">Iccfd9ad27a9f2ede60d02f5eee9027ae1243cd9a</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3053698">https://chromium-review.googlesource.com/c/chromium/src/+/3053698</a>
Reviewed-by: Rune Lillesveen &lt;futhark@chromium.org&gt;
Commit-Queue: Anders Hartvoll Ruud &lt;andruud@chromium.org&gt;
Cr-Commit-Position: refs/heads/master@{#907511}
</pre>

</body>
</html>
