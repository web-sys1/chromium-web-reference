<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1320741/"> 1320741</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/fd549b23c3d34026e3347585a8d96cb50f476ea8">fd549b23c3d34026e3347585a8d96cb50f476ea8</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1320718/">1320718</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/07d9695ebcbe87f7704e609d7c4e5ad21ca1a5d6">07d9695ebcbe87f7704e609d7c4e5ad21ca1a5d6</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   fd549b23c3d34026e3347585a8d96cb50f476ea8
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/fd549b23c3d34026e3347585a8d96cb50f476ea8">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/fd549b23c3d34026e3347585a8d96cb50f476ea8.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Ted Meyer &lt;tmathmeyer@chromium.org&gt;
  </td>
  <td>
   Fri Jun 28 00:42:51 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Jun 28 00:42:51 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/fd549b23c3d34026e3347585a8d96cb50f476ea8/">
    65270f1835f5698f55e87760846818dd097da9f7
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/fd549b23c3d34026e3347585a8d96cb50f476ea8%5E">
    aaf4cf167100a71bc1c0ccbbd4714156742d53c0
   </a>
   <span>
    [
    <a href="/chromium/src/+/fd549b23c3d34026e3347585a8d96cb50f476ea8%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Refactor the network fetching out of HlsManifestDemuxerEngine

The stats collector for MediaPlayer HLS playbacks will have to use the
same network fetching code as HlsManifestDemuxerEngine, so this change
separates the behavior into a new interface an implementation, which
both can use.

There are quite a few layers now to the HLS network stack, so I'll put
a nice little diagram here to help it make more sense:

MultiBufferDataSource
 |    - Caches network requests across an entire page load
 |      but only writes into raw buffers
 |
HlsDataSourceProviderImpl
 |    - Keeps an internal map of MBDS by ID, and provides
 |      access to the read interface via HlsDataSourceStream.
 |      Hides the raw buffer internally, but only reads in
 |      single chunks. It can also be used to concatenate
 |      data from multiple URLs together as if it was reading
 |      from a single source, which is useful for implementing
 |      the EXT-X-MAP tag.
 |
HlsNetworkAccess
 |    - Exposes interfaces for reading data directly from
 |      different types of HLS structures:
 |      Manifests are read in their entirety from a single URI
 |      MediaSegments are read as chunks from the MediaSegment
 |      structure.
 |
 |--HlsManifestDemuxerEngine
 |    - Uses Wraps some calls in HlsNetworkAccess and provides
 |      assistance to HlsRenditionImpl in updating manifests and
 |      fetching segments
 |
 \--HlsMediaPlayerTagRecorder (In the next CL)
      - Fetches the root manifest using HlsNetworkAccess and
        records stats about the contents when MediaPlayer is
        playing HLS content


Bug: 338277331
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I20e67efa53752dbb6bb479d43cc9fc0e1c49dae0">I20e67efa53752dbb6bb479d43cc9fc0e1c49dae0</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5637691">https://chromium-review.googlesource.com/c/chromium/src/+/5637691</a>
Reviewed-by: Eugene Zemtsov &lt;eugene@chromium.org&gt;
Commit-Queue: Ted (Chromium) Meyer &lt;tmathmeyer@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1320741}
</pre>

</body>
</html>
