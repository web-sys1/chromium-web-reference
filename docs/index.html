
<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}

table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}

body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td>818589</td>
       <td>8d0409df26acddeb98445fc57b96a2ea5e1eb217</td>
      </tr>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   8d0409df26acddeb98445fc57b96a2ea5e1eb217
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/8d0409df26acddeb98445fc57b96a2ea5e1eb217">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/8d0409df26acddeb98445fc57b96a2ea5e1eb217.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Olga Gerchikov &lt;gerchiko@microsoft.com&gt;
  </td>
  <td>
   Mon Oct 19 19:52:15 2020
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Commit Bot &lt;commit-bot@chromium.org&gt;
  </td>
  <td>
   Mon Oct 19 19:52:15 2020
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/8d0409df26acddeb98445fc57b96a2ea5e1eb217/">
    c104c4487f9c5f2850a8acec647fc1429bf84efb
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/8d0409df26acddeb98445fc57b96a2ea5e1eb217%5E">
    fb0f277a60cd47b42925047b9f28f7a55a68bdf3
   </a>
   <span>
    [
    <a href="/chromium/src/+/8d0409df26acddeb98445fc57b96a2ea5e1eb217%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Compute blocking wheel event handler regions for cc

Currently existence of non passive wheel event handler is
tracked on a frame level on cc. This requires main thread to process
all wheel events before scroll may begin on cc thread regardless
if the scroll was performed outside of a wheel region.

This change computes blocking wheel handler regions on main thread
and passes this information to cc, thus enabling starting composited
scrolls, when outside the blocking handler region, without querying
the main thread

Changes made:
- The feature is implemented behind cc feature flag, WheelEventRegions.
- Track if a given LayoutObject has a non-passive wheel event handler on
  itself or an ancestor that the wheel event could bubble to.
  To implement this tracking, we update a bit on the LayoutObject,
  InsideBlockingWheelEventHandler, during the PrePaint walk. This bit
  will be used during invalidation and painting to update hit-testing
  information on the generated paint chunks later in the pipeline.
  Additionally, support for this bit is added to the display locking
  code to keep wheel event handler updates from updating content in
  locked sections of the dom until the unlock occurs.
- Blocking wheel event regions are generated in the same manner as touch
  action regions. First, paint adds blocking wheel event rects
  to the HitTestData's wheel_event_rects associated with the relevant
  PaintChunks. Later, these PaintChunks are iterated through in
  PaintArtifactCompositor::UpdateWheelEventRects to create a region
  that is passed to the Layer.
- Blocking wheel event regions are passed from cc::Layer to cc::LayerImpl
  as part of PushPropertiesTo mechanism. This allows cc's wheel event
  routing to avoid sending wheel events through the renderer's main
  thread when they do not intersect with a rect that has a wheel event
  listener present, leading to improved latency.

See design doc:
<a href="https://docs.google.com/document/d/1ar4WhVnLA-fmw6atgP-23iq-ys_NfFoGb3LA5AgaylA/edit#heading=h.4wyzpk30wixv">https://docs.google.com/document/d/1ar4WhVnLA-fmw6atgP-23iq-ys_NfFoGb3LA5AgaylA/edit#heading=h.4wyzpk30wixv</a>

Bug: 841364
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/If9291332fcb49127d6defd4c7d324568597931c0">If9291332fcb49127d6defd4c7d324568597931c0</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2419718">https://chromium-review.googlesource.com/c/chromium/src/+/2419718</a>
Commit-Queue: Olga Gerchikov &lt;gerchiko@microsoft.com&gt;
Reviewed-by: Philip Rogers &lt;pdr@chromium.org&gt;
Reviewed-by: Sam Fortiner &lt;samfort@microsoft.com&gt;
Reviewed-by: Timothy Dresser &lt;tdresser@chromium.org&gt;
Cr-Commit-Position: refs/heads/master@{#818589}
</pre>

</body>
</html>
