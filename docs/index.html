<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1087383/"> 1087383</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/a5bd18e21a13b46d1e262ec43ae9fd134c77c978">a5bd18e21a13b46d1e262ec43ae9fd134c77c978</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1087372/">1087372</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/9a0a4140ce523cac5283b1d734accf8a9a6daaac">9a0a4140ce523cac5283b1d734accf8a9a6daaac</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   a5bd18e21a13b46d1e262ec43ae9fd134c77c978
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/a5bd18e21a13b46d1e262ec43ae9fd134c77c978">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/a5bd18e21a13b46d1e262ec43ae9fd134c77c978.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Moe Ahmadi &lt;mahmadi@chromium.org&gt;
  </td>
  <td>
   Wed Dec 28 18:59:29 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Wed Dec 28 18:59:29 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/a5bd18e21a13b46d1e262ec43ae9fd134c77c978/">
    dc37737d50f4f66626c582791c927f05d41a52de
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/a5bd18e21a13b46d1e262ec43ae9fd134c77c978%5E">
    e7c37f913f1667bb86517120726fb87d220e275b
   </a>
   <span>
    [
    <a href="/chromium/src/+/a5bd18e21a13b46d1e262ec43ae9fd134c77c978%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[Omnibox] Offer normalized search suggestions.

SearchProvider uses the original search term in the keyword_search_terms
table as the query text and for inline autocompletion. With an exception
of shortcuts search suggestions, all other search suggestions including
the remote suggestions use normalized search terms (lowercase with extra
whitespaces collapsed). Offering normalized search suggestions, is #1
more consistent with the remote search suggestions, and #2 allows
removing the original search term from the keyword_search_terms table,
saving memory.

In order to properly dedup the potentially mixedcase or uppercase
shortcut suggestions with the other search suggestion, this change
proactively sets a normalized `stripped_destination_url` on the
shortcut suggestions without changing the query or inline
autocompletion.

Note that the ShortcutsProvider already uses stripped_destination_url
for deduping its suggestion. Therefore proactively setting that on the
matches is safe and could even make deduping the ACController faster.

All the changes are behind a kill switch.

query: "TEST"
before (uppercase): <a href="http://screenshot/BhxK2yRhUR5nvN8">http://screenshot/BhxK2yRhUR5nvN8</a>
before (lowercase): <a href="http://screenshot/7DY4qYUAYcSmJ4G">http://screenshot/7DY4qYUAYcSmJ4G</a>
after (uppercase): <a href="http://screenshot/BQiZcQvRQRHfmXp">http://screenshot/BQiZcQvRQRHfmXp</a>
after (lowercase): <a href="http://screenshot/5Uq2HKWEG2hLDrX">http://screenshot/5Uq2HKWEG2hLDrX</a>

Bug: 1119654
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I30859613e27aa7d04f6fea068cdb4d7ff9110ced">I30859613e27aa7d04f6fea068cdb4d7ff9110ced</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3629914">https://chromium-review.googlesource.com/c/chromium/src/+/3629914</a>
Reviewed-by: Justin Donnelly &lt;jdonnelly@chromium.org&gt;
Commit-Queue: Moe Ahmadi &lt;mahmadi@chromium.org&gt;
Reviewed-by: manuk hovanesian &lt;manukh@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1087383}
</pre>

</body>
</html>
