<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1026396/"> 1026396</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/e206e3ccca99ac4da745931030ed214b4164299b">e206e3ccca99ac4da745931030ed214b4164299b</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1026271/">1026271</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/9095b41802d1f524792c6f7d97ad58a037deb416">9095b41802d1f524792c6f7d97ad58a037deb416</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   e206e3ccca99ac4da745931030ed214b4164299b
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/e206e3ccca99ac4da745931030ed214b4164299b">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/e206e3ccca99ac4da745931030ed214b4164299b.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Xianzhu Wang &lt;wangxianzhu@chromium.org&gt;
  </td>
  <td>
   Wed Jul 20 19:49:56 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Wed Jul 20 19:49:56 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/e206e3ccca99ac4da745931030ed214b4164299b/">
    9ae8220c637c9685c629a0111802c14a52917988
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/e206e3ccca99ac4da745931030ed214b4164299b%5E">
    2eb7e17dbb1b9d09ce24b0c00ec3838cc89904be
   </a>
   <span>
    [
    <a href="/chromium/src/+/e206e3ccca99ac4da745931030ed214b4164299b%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Fix hairlines along edges of mask bounding box in masked layers

The following caused the hairlines:
1. Both the mask layer and the masked layer were under the same clip
   node which clips the layers to the mask bounding box;
2. The mask layer and the masked layer used different raster scales,
   and mapping clip rects between the layer space and the screen
   space caused errors. In the screen space, if the rect on the
   masked layer was bigger than the mask layer, pixels along the
   edges of the mask bounding box in the masked layer would
   be visible.

We can't force the same raster scale of the masked layer and the mask
layer because sometimes they are determined independently for the best
result of each layer. For example, we want to use the native scale for
surface layers (used for composited videos).

To solve the problem:
1. Change the output clip of the mask effect node and its isolation
   group node from the mask clip to the parent of the mask clip.
2. Change the painted result of the mask layer to the above output
   clip, so that the mask is no longer clipped by the mask bounding
   box.
3. Expand the bounds of the mask layer to make sure it always covers
   the masked layer.

This won't change the rendered result (except for slight change in
anti-aliased pixels when the surface/texture pixels are not 1:1
matching physical pixels) because the mask layer should be transparent
outside of the mask bounding box, and these transparent pixels should
mask off the pixels in the masked layers just like an exact mask clip.

Bug: 1171601
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I85ff66e54eb67d8be01a5791d38622397da3cdf7">I85ff66e54eb67d8be01a5791d38622397da3cdf7</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3742680">https://chromium-review.googlesource.com/c/chromium/src/+/3742680</a>
Commit-Queue: Xianzhu Wang &lt;wangxianzhu@chromium.org&gt;
Reviewed-by: Philip Rogers &lt;pdr@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1026396}
</pre>

</body>
</html>
