<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/849013/"> 849013</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/532fea9e2fd23af9eae3a5f45a97782a67c9c722">532fea9e2fd23af9eae3a5f45a97782a67c9c722</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/849006/">849006</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/131b636d108d512c29d21748d2bc1b8dfa3542e2">131b636d108d512c29d21748d2bc1b8dfa3542e2</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   532fea9e2fd23af9eae3a5f45a97782a67c9c722
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/532fea9e2fd23af9eae3a5f45a97782a67c9c722">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/532fea9e2fd23af9eae3a5f45a97782a67c9c722.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Alex Keng &lt;shihken@microsoft.com&gt;
  </td>
  <td>
   Mon Feb 01 06:48:28 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Mon Feb 01 06:48:28 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/532fea9e2fd23af9eae3a5f45a97782a67c9c722/">
    e0cf0e2a9dcde71c0978a32b42cf2d81cd0aa3eb
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/532fea9e2fd23af9eae3a5f45a97782a67c9c722%5E">
    350e1e08605fd0527d51e2cbfb1895e746474f57
   </a>
   <span>
    [
    <a href="/chromium/src/+/532fea9e2fd23af9eae3a5f45a97782a67c9c722%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">EditContext: introduce Element.editContext

This CL introduces Element.editContext to create the association between
EditContext and the element that is served as the 'view' of the
EditContext buffer.

An element is considered editable if there is an active EditContext
associated with the element or its ancestors. The caret will show up
but the user input will go to EditContext without modifying DOM.

The design allows web authors leverage the native selection/caret to
handle caret navigation with EditContext (by using selectionchange
event to map the selection from DOM space back to EditContext's plain
text space. A test for this will be added in a separate CL)

It also enables editing heuristics, ex. up/down keys not scrolling
the page, and the context menu (Note currently some of the commands,
ex paste/cut, can still modify DOM, which will be blocked in later CLs)

This CL also adds a test for Element.editContext and fixes two bugs
in edit_context.cc:

1. in EditContext::SetComposition, the new composition_range_end_
should be composition_range_start_ + text.length instead of
 + selection_end since during the composition we can use arrow key
to change word candidates which will change the selection but
the composition range should remain the same.

2. in EditContext::CompositionRange/GetSelectionOffsets, WebRange
should take length as the 2nd parameter instead of the end position.



Bug: 999184
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I09e6e04f54410d9711c5e7d0a8a91bc6bdb21f9d">I09e6e04f54410d9711c5e7d0a8a91bc6bdb21f9d</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2644502">https://chromium-review.googlesource.com/c/chromium/src/+/2644502</a>
Reviewed-by: Yoshifumi Inoue &lt;yosin@chromium.org&gt;
Reviewed-by: Anupam Snigdha &lt;snianu@microsoft.com&gt;
Reviewed-by: Kent Tamura &lt;tkent@chromium.org&gt;
Commit-Queue: Alex Keng &lt;shihken@microsoft.com&gt;
Cr-Commit-Position: refs/heads/master@{#849013}
</pre>

</body>
</html>
