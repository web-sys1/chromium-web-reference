<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/979633/"> 979633</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/074870130617e0d52d7ce001af82a3370b5e1ac2">074870130617e0d52d7ce001af82a3370b5e1ac2</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/979599/">979599</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/79c1a0d73212f93a035558f7c14e3dbf5e56638c">79c1a0d73212f93a035558f7c14e3dbf5e56638c</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   074870130617e0d52d7ce001af82a3370b5e1ac2
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/074870130617e0d52d7ce001af82a3370b5e1ac2">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/074870130617e0d52d7ce001af82a3370b5e1ac2.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Mark Mentovai &lt;mark@chromium.org&gt;
  </td>
  <td>
   Thu Mar 10 04:13:10 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Mar 10 04:13:10 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/074870130617e0d52d7ce001af82a3370b5e1ac2/">
    c8d383fa68efa56bfb059406c3925710008d2620
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/074870130617e0d52d7ce001af82a3370b5e1ac2%5E">
    5c6c4ecd18e910e497b9e5a4ee95d1eaede06085
   </a>
   <span>
    [
    <a href="/chromium/src/+/074870130617e0d52d7ce001af82a3370b5e1ac2%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">mac: Don’t codesign --sign with an explicit --requirement unless needed

Chromium builds, when cryptographically code signed with a proper
identity, failed to allow PWA app_mode_loader shims to connect, because
they were verifying the shims’ identities based on a requirement
constructed from the framework’s designated requirement. That designated
requirement was accidentally truncated because the default public
signing configuration did not set an explicit requirement. As a result,
the framework’s designated requirement was simply “identifier
"org.chromium.Chromium.framework"” without any requirement binding a
specific identity. app_mode_loader shim verification, enhanced by bug
1281111, b52080a266b4cbb3a0f1477e1f147d987248f950,
<a href="https://chromium-review.googlesource.com/c/3453293,">https://chromium-review.googlesource.com/c/3453293,</a> could not build a
valid app_mode_loader requirement out of this incomplete requirement,
and refused to let any shim connect.

Branded Chrome builds were not affected because they had always set
explicit requirements on all objects.

To resolve, model.CodeSignedProduct.requirements_string is updated to
not attempt to form a requirement string when the input requirements and
the config’s codesign_requirements_basic are both empty. When this
occurs, the default requirements applied by codesign --sign will be
used, which should be appropriate in all cases, including when signing
with a Developer ID certificate. In that case, the requirement will bind
objects signed with the correct identifier by a Developer ID Application
certificate issued to the correct team ID, which is what we had expected
was happening. There is no change where requirements are explicitly
specified, as is the case for branded Chrome builds.

Bug: 1303028
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ide3617de90ecc78f2f50e18f65756d73f26104ed">Ide3617de90ecc78f2f50e18f65756d73f26104ed</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3497891">https://chromium-review.googlesource.com/c/chromium/src/+/3497891</a>
Reviewed-by: Robert Sesek &lt;rsesek@chromium.org&gt;
Reviewed-by: Avi Drissman &lt;avi@chromium.org&gt;
Commit-Queue: Mark Mentovai &lt;mark@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#979633}
</pre>

</body>
</html>
