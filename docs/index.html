<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1012874/"> 1012874</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/d88b1513bba58af77a8cd5416f360176ca2b1c30">d88b1513bba58af77a8cd5416f360176ca2b1c30</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1012851/">1012851</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/3946865b5e538057c8391709a324c89eb27a13d3">3946865b5e538057c8391709a324c89eb27a13d3</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   d88b1513bba58af77a8cd5416f360176ca2b1c30
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/d88b1513bba58af77a8cd5416f360176ca2b1c30">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/d88b1513bba58af77a8cd5416f360176ca2b1c30.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Dale Curtis &lt;dalecurtis@chromium.org&gt;
  </td>
  <td>
   Fri Jun 10 09:39:35 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Fri Jun 10 09:39:35 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/d88b1513bba58af77a8cd5416f360176ca2b1c30/">
    1e66586c37526cae670abf86526898eabdab9649
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/d88b1513bba58af77a8cd5416f360176ca2b1c30%5E">
    15837ffb2b7fc455a75c4454c431edce369740f6
   </a>
   <span>
    [
    <a href="/chromium/src/+/d88b1513bba58af77a8cd5416f360176ca2b1c30%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[VideoCapture] Don't double configure the capture device on macOS.

The existing code was starting the device and then changing its
configuration, this almost doubles the startup time. A comment in
the code says it was done to ensure the configuration took effect.

macOS documentation[1] says instead that we should set the config
before starting the session with a block of beginConfiguration and
commitConfiguration calls.

Notably this documentation was just updated after Monday's WWDC,
previously it just said to hold lockForConfiguration when calling
startRunning... which did not appear to work: b/234196290

With this change resolution changes for the built-in camera on a
M1 MacBook Pro 14" go from ~550ms to ~350ms using the test page
from the bug. I saw no change in configuration times when using
an external Logitech C910 on an Intel Mac Mini.

This functionality is controlled by a new base::Feature called
"ConfigureCaptureBeforeStart" which is on by default (since the
new code is following Apple's recommended approach).

[1]: <a href="https://developer.apple.com/documentation/avfoundation/avcapturedevice/1389221-activeformat#discussion">https://developer.apple.com/documentation/avfoundation/avcapturedevice/1389221-activeformat#discussion</a>

Bug: 1324640
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Id2da3340a0d36bf19879186cba97834214b8b697">Id2da3340a0d36bf19879186cba97834214b8b697</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3696666">https://chromium-review.googlesource.com/c/chromium/src/+/3696666</a>
Commit-Queue: Markus Handell &lt;handellm@google.com&gt;
Reviewed-by: Markus Handell &lt;handellm@google.com&gt;
Auto-Submit: Dale Curtis &lt;dalecurtis@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1012874}
</pre>

</body>
</html>
