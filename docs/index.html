<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/986697/"> 986697</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/e2e042f4c34cff4555412fc4bba955cf963e4e39">e2e042f4c34cff4555412fc4bba955cf963e4e39</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/986687/">986687</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/244032a1d5abb73377c30d1125785a04528e8173">244032a1d5abb73377c30d1125785a04528e8173</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   e2e042f4c34cff4555412fc4bba955cf963e4e39
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/e2e042f4c34cff4555412fc4bba955cf963e4e39">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/e2e042f4c34cff4555412fc4bba955cf963e4e39.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Victor Costan &lt;pwnall@chromium.org&gt;
  </td>
  <td>
   Tue Mar 29 21:11:34 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Tue Mar 29 21:11:34 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/e2e042f4c34cff4555412fc4bba955cf963e4e39/">
    d18eff1a026cfc9ab0fbfbb33a23c1354ad48d8a
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/e2e042f4c34cff4555412fc4bba955cf963e4e39%5E">
    2d023f9f249056a52dfa305aca6986f2bca86404
   </a>
   <span>
    [
    <a href="/chromium/src/+/e2e042f4c34cff4555412fc4bba955cf963e4e39%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">sql: Clean up MetaTable.

This CL performs the following cleanups on sql::MetaTable.

* Replace all SELECT variants with PrepareGetStatement() and all INSERT
  variants with PrepareSetStatement(). Asides from reducing code
  duplication, this will reduce the number of prepared statements in the
  database's cache.

* Move Prepare{Get,Set}Statement() from private static methods to
  functions in the implementation file's anonymous namespace.

* Replace const char* arguments with base::StringPiece.

* Replace pointers with references for out arguments. This change is
  currently scoped to internal APIs, because changing external APIs
  would require updates across the whole codebase.

* Remove the SetValue() override that takes an int value. The C++
  compiler's override selection will implicitly migrate callsites to the
  SetValue() override that takes an int64_t.

* Migrate the GetValue() implementation from ColumnInt() to
  ColumnInt64().

* Tighten SQL query syntax by removing unnecessary extra spaces.

* Add DCHECKs documenting (and checking) preconditions.

* IWYU fixes in both the header and the implementation file.

This CL does not change the meta table's schema. While that is
suboptimal, fixing it will require migration code, which would be best
done in a separate CL.

Bug: 1228463, 1299863
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I1f8bfed7aa021470d5ae47cd94bfa0acc9f11ecf">I1f8bfed7aa021470d5ae47cd94bfa0acc9f11ecf</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3556693">https://chromium-review.googlesource.com/c/chromium/src/+/3556693</a>
Auto-Submit: Victor Costan &lt;pwnall@chromium.org&gt;
Reviewed-by: Austin Sullivan &lt;asully@chromium.org&gt;
Commit-Queue: Austin Sullivan &lt;asully@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#986697}
</pre>

</body>
</html>
