<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/887335/"> 887335</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/aba9e65e35150f86729dff794b4ccc44f4bb5278">aba9e65e35150f86729dff794b4ccc44f4bb5278</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/887307/">887307</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/b21775d121bda1fb5084487547a63dccb5429b74">b21775d121bda1fb5084487547a63dccb5429b74</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   aba9e65e35150f86729dff794b4ccc44f4bb5278
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/aba9e65e35150f86729dff794b4ccc44f4bb5278">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/aba9e65e35150f86729dff794b4ccc44f4bb5278.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Dominic Mazzoni &lt;dmazzoni@chromium.org&gt;
  </td>
  <td>
   Thu May 27 21:11:28 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu May 27 21:11:28 2021
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/aba9e65e35150f86729dff794b4ccc44f4bb5278/">
    e1da22984bed0a80945519e467333f42b85901c8
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/aba9e65e35150f86729dff794b4ccc44f4bb5278%5E">
    452f094e61c24b55de29b65ebad416789b3e309e
   </a>
   <span>
    [
    <a href="/chromium/src/+/aba9e65e35150f86729dff794b4ccc44f4bb5278%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Fire CONTENT_CHANGE_TYPE_SUBTREE with AccessibilityEvents

When Chrome fires a TYPE_WINDOW_CONTENT_CHANGED AccessibilityEvent,
it's implied that the whole subtree has changed, but we need to be
specifying the CONTENT_CHANGE_TYPE_SUBTREE flag in order for Android
to properly clear the accessibility cache.

This was leading to rare issues where assistive technology was
getting a stale version of the page, but it was flaky and hard
to reproduce.

This is a longstanding bug that existed for so long because
(1) CONTENT_CHANGE_TYPE_SUBTREE was introduced after
    TYPE_WINDOW_CONTENT_CHANGED - probably Android should
    have made it the default for apps that didn't specify.
(2) For various reasons TalkBack was almost completely
    unaffected. We're only seeing this now with accessibility
    tree snapshots or with other AT.

Bug: 1213963
AX-Relnotes: Fixes an issue where Android assistive technology might temporarily get stale content rather than the current content on the screen.
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I9d7309b06857e45746c23a21f66f258f30c9271e">I9d7309b06857e45746c23a21f66f258f30c9271e</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/2921769">https://chromium-review.googlesource.com/c/chromium/src/+/2921769</a>
Reviewed-by: Abigail Klein &lt;abigailbklein@google.com&gt;
Reviewed-by: Dominic Mazzoni &lt;dmazzoni@chromium.org&gt;
Commit-Queue: Dominic Mazzoni &lt;dmazzoni@chromium.org&gt;
Cr-Commit-Position: refs/heads/master@{#887335}
</pre>

</body>
</html>
