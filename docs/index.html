<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1323108/"> 1323108</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/97dc5182a8c28e5d2894b7d39f9db087b2c50146">97dc5182a8c28e5d2894b7d39f9db087b2c50146</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1323096/">1323096</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5c796d4b8ce44f36f493686a67cf13c5dbcdae7a">5c796d4b8ce44f36f493686a67cf13c5dbcdae7a</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   97dc5182a8c28e5d2894b7d39f9db087b2c50146
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/97dc5182a8c28e5d2894b7d39f9db087b2c50146">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/97dc5182a8c28e5d2894b7d39f9db087b2c50146.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Elly &lt;ellyjones@chromium.org&gt;
  </td>
  <td>
   Thu Jul 04 01:04:22 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Jul 04 01:04:22 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/97dc5182a8c28e5d2894b7d39f9db087b2c50146/">
    3644a1f6c767cb72e160b7e15f5d28a265ac3f12
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/97dc5182a8c28e5d2894b7d39f9db087b2c50146%5E">
    ec5d3c5614497ff73d6696c9a83d3589e4bdfee3
   </a>
   <span>
    [
    <a href="/chromium/src/+/97dc5182a8c28e5d2894b7d39f9db087b2c50146%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">passwords: refactor PasswordManagerPorter

At the moment PasswordManagerPorter does two separate tasks: import
passwords and export passwords. It used a single codepath to handle the
SelectFileDialog for either case, and passed a state variable through
(using SelectFileDialog's deprecated params mechanism) to tell whether
it was doing an import or an export. That state variable was used inside
the SelectFileDialog callbacks to tell whether an import or an export
was in progress and react accordingly. Since the import and export
dialogs also used different titles and selection modes, in practice that
led to code looking like this:

  void PresentFileSelector() {
    if (export)
      SelectFileDialog(export_title, export_mode, ..., IS_EXPORT);
    else if (import)
      SelectFileDialog(import_title, import_mode, ..., IS_IMPORT);
  }

  void FileSelected(int mode) {
    if (mode == IS_EXPORT) {
      ...
    } else {
      ...
    }
  }

  void FileSelectionCanceled(int mode) {
    if (mode == IS_EXPORT) {
      ...
    } else {
      ...
    }
  }

so in actuality, several of these functions were two largely-separate
functions fused together with a boolean (sort of). This change splits
them, so there are now separate code paths for import and export.
Possibly PasswordManagerPorter itself should be split up into two
fully separate classes since the export and import paths aren't ever
used together on the same object (as far as I can tell...), but that
would be a larger refactor.

This has the effect of dropping this class's dependency on the
deprecated params mechanism in ui::SelectFileDialog.

Bug: 340178601
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I79e49a67d6d4770ffa593865e7b9dbd9598305fb">I79e49a67d6d4770ffa593865e7b9dbd9598305fb</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5677645">https://chromium-review.googlesource.com/c/chromium/src/+/5677645</a>
Commit-Queue: Elly FJ &lt;ellyjones@chromium.org&gt;
Reviewed-by: Scott Violet &lt;sky@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1323108}
</pre>

</body>
</html>
