<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1228431/"> 1228431</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/f89728740d51e494e4874b268677ac5f5c4ed318">f89728740d51e494e4874b268677ac5f5c4ed318</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1228430/">1228430</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/3d61207933b082ce7b34b92074d5afa6e175a642">3d61207933b082ce7b34b92074d5afa6e175a642</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   f89728740d51e494e4874b268677ac5f5c4ed318
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/f89728740d51e494e4874b268677ac5f5c4ed318">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/f89728740d51e494e4874b268677ac5f5c4ed318.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Sylvain Defresne &lt;sdefresne@chromium.org&gt;
  </td>
  <td>
   Thu Nov 23 14:31:30 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Nov 23 14:31:30 2023
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/f89728740d51e494e4874b268677ac5f5c4ed318/">
    05e6556aea505dc992a0c88e531beaa9a6740e37
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/f89728740d51e494e4874b268677ac5f5c4ed318%5E">
    3d61207933b082ce7b34b92074d5afa6e175a642
   </a>
   <span>
    [
    <a href="/chromium/src/+/f89728740d51e494e4874b268677ac5f5c4ed318%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">[ios] Fix layout issue after undoing a "close all tabs" operation

To fix a visual glitch when undoing the "close all tabs" operation
restore both active and inactive tabs (the restoration happening in
two steps), the tiles are inserted with a size of 0.

With the current implementation of the undo (which save the session
when closing the tabs and restore the session to perform the undo),
some tabs will perform a navigation as part of the restoration. The
navigation will eventually result in a relayout (e.g. when the tab
title changes) which will set the correct dimension on the tiles.

If no navigation happens as part of the session restoration (e.g. if
the active tab is pinned, and there are no active unpinned tabs) or
if the navigation is too slow (e.g. slow network), then the tab grid
will appear empty. If the user tap "done" at this point, the UI will
try to animate a tab of size 0, leading to a CHECK failure in the
method -scaleTabViews.

To fix this, invalidate the layout after the whole undo operation is
complete, forcing the correct dimension to be computed for the tiles.

  This is a reland of <a href="https://crrev.com/c/5040433">https://crrev.com/c/5040433</a> which was reverted
  by mistake in <a href="https://crrev.com/c/5033771">https://crrev.com/c/5033771</a> probably during a rebase.

Fixed: 1427258
Bug: 1383087
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Icc56cf9dfd14c6ab831ebafb2e95ea1409d97518">Icc56cf9dfd14c6ab831ebafb2e95ea1409d97518</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5053990">https://chromium-review.googlesource.com/c/chromium/src/+/5053990</a>
Commit-Queue: Sylvain Defresne &lt;sdefresne@chromium.org&gt;
Auto-Submit: Sylvain Defresne &lt;sdefresne@chromium.org&gt;
Code-Coverage: findit-for-me@appspot.gserviceaccount.com &lt;findit-for-me@appspot.gserviceaccount.com&gt;
Reviewed-by: Aliona Dangla &lt;alionadangla@chromium.org&gt;
Commit-Queue: Aliona Dangla &lt;alionadangla@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1228431}
</pre>

</body>
</html>
