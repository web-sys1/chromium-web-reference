<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1008775/"> 1008775</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/b45fc733f41912a702191b0bf6d7648a28c17b09">b45fc733f41912a702191b0bf6d7648a28c17b09</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1008772/">1008772</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/7a2a1e57c9384b6bc27127c55d48cafeb85eb719">7a2a1e57c9384b6bc27127c55d48cafeb85eb719</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   b45fc733f41912a702191b0bf6d7648a28c17b09
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/b45fc733f41912a702191b0bf6d7648a28c17b09">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/b45fc733f41912a702191b0bf6d7648a28c17b09.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Dominic Battre &lt;battre@chromium.org&gt;
  </td>
  <td>
   Mon May 30 09:16:06 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Mon May 30 09:16:06 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/b45fc733f41912a702191b0bf6d7648a28c17b09/">
    470eabd217cdb3a2ddaa9ec3fea22e44a4c70ac1
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/b45fc733f41912a702191b0bf6d7648a28c17b09%5E">
    47c38c18cbf5657c922d0036cc2edb0d9595556d
   </a>
   <span>
    [
    <a href="/chromium/src/+/b45fc733f41912a702191b0bf6d7648a28c17b09%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Move Autofill State setting deeper

This CL pushes the setting of the AutofillState into the
SetSuggestedValue/SetAutofilledValue functions. After being called
it is guaranteed that the value is as expected.

The reason for this change is the following:

<a href="https://chromium-review.googlesource.com/c/chromium/src/+/3655349">https://chromium-review.googlesource.com/c/chromium/src/+/3655349</a>
landed with the intention of notifying the browser process if
JavaScript overrides an autofilled value.

It turned out that this only worked if the JavaScript changed the
value after the autofill. It is possible, however, that the website
registers a 'change' event handler for an &lt;input&gt; element and overrides
the autofilled value directly when it gets set. At this point the
autofill state of the input element had not been updated and the
entire reporting mechanism failed.

With this change, we set the autofill state before setting the value
(and before JavaScript can override it) and - to be behavior
preserving - also after JavaScript had a chance to override it during
the operation of setting the autofill value.

Bug: 1314360
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I2598adfaa17fc18ce80b4af3d35139b043aba0dd">I2598adfaa17fc18ce80b4af3d35139b043aba0dd</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3663020">https://chromium-review.googlesource.com/c/chromium/src/+/3663020</a>
Reviewed-by: Kent Tamura &lt;tkent@chromium.org&gt;
Reviewed-by: Christoph Schwering &lt;schwering@google.com&gt;
Commit-Queue: Dominic Battr√© &lt;battre@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1008775}
</pre>

</body>
</html>
