<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1075550/"> 1075550</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/81bad54301964fc2520363fee07f9424f01d32ca">81bad54301964fc2520363fee07f9424f01d32ca</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1075541/">1075541</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/27d5c5572b5ffd52400243556c55e93d5469ae61">27d5c5572b5ffd52400243556c55e93d5469ae61</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   81bad54301964fc2520363fee07f9424f01d32ca
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/81bad54301964fc2520363fee07f9424f01d32ca">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/81bad54301964fc2520363fee07f9424f01d32ca.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Ashley Newson &lt;ashleynewson@chromium.org&gt;
  </td>
  <td>
   Thu Nov 24 12:21:36 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu Nov 24 12:21:36 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/81bad54301964fc2520363fee07f9424f01d32ca/">
    36597b7f191180613e46d5b686e7e5ed601ba43d
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/81bad54301964fc2520363fee07f9424f01d32ca%5E">
    d831054ff82f190c5b9179c06aa13128b9458556
   </a>
   <span>
    [
    <a href="/chromium/src/+/81bad54301964fc2520363fee07f9424f01d32ca%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Implement heap OOM management for JavaScriptEngine

Prevent an OOMing isolate from bringing down the entire sandbox by
freezing the thread before a crash.

JavaScriptEngine runs on Android and thus uses a single process to host
all V8 isolates and minimize impact on system health. The code which can
be run in separate isolates may be totally unrelated and thus should not
interfere with each other's execution.

V8 is designed primarily for a multi-process architecture, where
crashing the process would be a contained event. As such, its normal
response to exceeding the heap limit is to abort the process, which is
inappropriate for the shared-process architecture of JavaScriptEngine.

Therefore, in order to minimise the impact on other isolates, we enter an idle loop in the misbehaving isolate's thread to avoid the crash.

These changes are specifically for heap-based memory management.
Memory management for Array Buffers will be addressed separately.

Bug: 1347094
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I6ae1a555809b6791c697530bff7b5fc7a99a46f7">I6ae1a555809b6791c697530bff7b5fc7a99a46f7</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/4047785">https://chromium-review.googlesource.com/c/chromium/src/+/4047785</a>
Commit-Queue: Ashley Newson &lt;ashleynewson@chromium.org&gt;
Reviewed-by: Gabriel Charette &lt;gab@chromium.org&gt;
Reviewed-by: Matthew Denton &lt;mpdenton@chromium.org&gt;
Reviewed-by: Peter Beverloo &lt;peter@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1075550}
</pre>

</body>
</html>
