<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1007875/"> 1007875</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a">67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1007864/">1007864</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/db9587ff4e8717170983063b2cad742a2c06184f">db9587ff4e8717170983063b2cad742a2c06184f</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Robert Ogden &lt;robertogden@chromium.org&gt;
  </td>
  <td>
   Thu May 26 16:50:16 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Thu May 26 16:50:16 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a/">
    ec44598eb6623e36c710a90a4a85abeeb0886b32
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a%5E">
    9d58e56beba4984bf4c69226e0f5946e31219098
   </a>
   <span>
    [
    <a href="/chromium/src/+/67b9bc3cb989dfdbf33631ab162d43d5cf97cb6a%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Reland "Build TFLite with ruy on all platforms"

This is a reland of commit 54538ddd169442dce86e63ecb14adb25b7679bc0

PS1 is the original change, so feel free to diff from that. The
cause of the revert was an iOS target that built for multiple cpu archs,
specifically where target_cpu != current_cpu. And current_cpu should
have been the source of truth. <a href="http://screen/9uhTfr9QZoSuhbe">http://screen/9uhTfr9QZoSuhbe</a>

I changed target_cpu to current_cpu everywhere, and also fixed the
weird toolchain checking in the original CL,
<a href="http://screen/ByTsMQdcPim5LSr.">http://screen/ByTsMQdcPim5LSr.</a> That was the same problem, just a
different platform.

Note that the failing bot (<a href="https://ci.chromium.org/ui/p/chrome/builders/ci/ios-web-view-simulator/18189/overview">https://ci.chromium.org/ui/p/chrome/builders/ci/ios-web-view-simulator/18189/overview</a>)
is not available on the CQ, so I am flying
a bit blind here but it works on my machine (famous last words).

Original change's description:
&gt; Build TFLite with ruy on all platforms
&gt;
&gt; The gemmlowp backend is unsupported and has started causing crashes on
&gt; Mac (see bug). This CL attempts to move all platforms over to the ruy
&gt; backend, except on Linux_x64 where XNNPACK may be used.
&gt;
&gt; The ruy build file was written in the same pattern and with the same
&gt; targets, opts, srcs, deps, etc as the ruy cmake file in its GitHub.
&gt; While some aspects of ruy's build, e.g.: having individual targets for
&gt; specific pieces rather than one big source set, differ from Chrome
&gt; common practice, this is an intentional decision to make maintenance
&gt; easier if and when the build changes.
&gt;
&gt; The cpuinfo build file was small enough to hand-roll, using its bazel
&gt; file as a guide.
&gt;
&gt; Note that while gemmlowp is no longer used as the tflite backend, it
&gt; cannot be removed from the src tree since some headers are still
&gt; referenced in tflite common.
&gt;
&gt; Binary size increase - Necessary for a significant speed increase when
&gt; running tflite models, and unblocking SBClientPhishingDetection on Mac,
&gt; see crash bug.
&gt;
&gt; Binary-Size: See commit description.
&gt; Bug: 1326455, 1228275
&gt; Cq-Include-Trybots: luci.chromium.try:linux_chromium_cfi_rel_ng
&gt; Cq-Include-Trybots: luci.chromium.try:chromeos-kevin-compile-rel
&gt; Cq-Include-Trybots: luci.chromium.try:chromeos-amd64-generic-rel
&gt; Cq-Include-Trybots: luci.chromium.try:chromeos-arm-generic-rel
&gt; Cq-Include-Trybots: luci.chrome.try:chromeos-betty-pi-arc-chrome
&gt; Cq-Include-Trybots: luci.chrome.try:chromeos-kevin-compile-chrome
&gt; Cq-Include-Trybots: luci.chrome.try:chromeos-eve-compile-chrome
&gt; Cq-Include-Trybots: luci.chrome.try:chromeos-octopus-compile-chrome
&gt; Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I3c7f48353a029673a9de5a013ccb10bda01ec256">I3c7f48353a029673a9de5a013ccb10bda01ec256</a>
&gt; Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3654814">https://chromium-review.googlesource.com/c/chromium/src/+/3654814</a>
&gt; Commit-Queue: Robert Ogden &lt;robertogden@chromium.org&gt;
&gt; Reviewed-by: Nico Weber &lt;thakis@chromium.org&gt;
&gt; Auto-Submit: Robert Ogden &lt;robertogden@chromium.org&gt;
&gt; Reviewed-by: Michael Crouse &lt;mcrouse@chromium.org&gt;
&gt; Commit-Queue: Michael Crouse &lt;mcrouse@chromium.org&gt;
&gt; Cr-Commit-Position: refs/heads/main@{#1007459}

Binary-Size: See commit description.
Bug: 1326455, 1228275
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/Ib4423a4dc905ae6af5c8977ffe7c4dce848543d6">Ib4423a4dc905ae6af5c8977ffe7c4dce848543d6</a>
Cq-Include-Trybots: luci.chromium.try:linux_chromium_cfi_rel_ng
Cq-Include-Trybots: luci.chromium.try:chromeos-kevin-compile-rel
Cq-Include-Trybots: luci.chromium.try:chromeos-amd64-generic-rel
Cq-Include-Trybots: luci.chromium.try:chromeos-arm-generic-rel
Cq-Include-Trybots: luci.chrome.try:chromeos-betty-pi-arc-chrome
Cq-Include-Trybots: luci.chrome.try:chromeos-kevin-compile-chrome
Cq-Include-Trybots: luci.chrome.try:chromeos-eve-compile-chrome
Cq-Include-Trybots: luci.chrome.try:chromeos-octopus-compile-chrome
Cq-Include-Trybots: luci.chromium.try:ios-simulator-noncq
Cq-Include-Trybots: luci.chromium.try:ios-simulator
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3668671">https://chromium-review.googlesource.com/c/chromium/src/+/3668671</a>
Reviewed-by: Nico Weber &lt;thakis@chromium.org&gt;
Reviewed-by: Michael Crouse &lt;mcrouse@chromium.org&gt;
Commit-Queue: Robert Ogden &lt;robertogden@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1007875}
</pre>

</body>
</html>
