<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1006200/"> 1006200</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f">5d8d1585b8af955b4866b1f7c88a32a8959b5e9f</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1006199/">1006199</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/f24d6b25f3e61ee35ed2a6f5bb9ab66cfe6f7103">f24d6b25f3e61ee35ed2a6f5bb9ab66cfe6f7103</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   5d8d1585b8af955b4866b1f7c88a32a8959b5e9f
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Bruce Dawson &lt;brucedawson@chromium.org&gt;
  </td>
  <td>
   Sun May 22 04:55:49 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Sun May 22 04:55:49 2022
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f/">
    f09b3c98538845407f7e0fbeefee261ae6416a33
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f%5E">
    f24d6b25f3e61ee35ed2a6f5bb9ab66cfe6f7103
   </a>
   <span>
    [
    <a href="/chromium/src/+/5d8d1585b8af955b4866b1f7c88a32a8959b5e9f%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table><hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Fix mb_unittest.py for Windows

The tests in mb_unittest.py carefully mock the file system entirely, and
then do Linux and Windows tests on both platforms. That's all great, but
somehow when run on Windows we were getting various errors including
this one:

    KeyError: '/fake_src/out/Default/C:\\src\\temp\\mb_test/task.json'

That path does not look good. The root cause is that crrev.com/c/2378273
added a TempDir function and that function did this:

    tmp_dir = os.path.join(tempfile.gettempdir(), 'mb_test')

That is, it used OS functions to get the temporary directory and to do
path joining. When testing the Linux functionality on Windows the
_AbsPath would look at 'C:\\src\\temp\\mb_test' and determine that it
was not a relative directory so it would prepend the current working
directory, and the world falls apart.

The fix is to mock the temporary directory as well. It's anticlimactic
really.

The fact that these tests worked on Linux was just luck (good or bad,
you decide). With this fixed the presubmits only have one minor
Windows-specific failure remaining.

Bug: 1309977
Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I4988b6d1b56e2da50196dfc3f339c4e12b80045c">I4988b6d1b56e2da50196dfc3f339c4e12b80045c</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/3659032">https://chromium-review.googlesource.com/c/chromium/src/+/3659032</a>
Reviewed-by: Daniel Cheng &lt;dcheng@chromium.org&gt;
Commit-Queue: Bruce Dawson &lt;brucedawson@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1006200}
</pre>

</body>
</html>
