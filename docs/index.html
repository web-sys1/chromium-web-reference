<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<base href="https://chromium.googlesource.com/">
<style type="text/css">
table.blueTable {
  border: 1px solid #1C6EA4;
  background-color: #EEEEEE;
  width: 100%;
  text-align: center;
  border-collapse: collapse;
}
table.blueTable td, table.blueTable th {
  border: 1px solid #AAAAAA;
  padding: 3px 2px;
}
table.blueTable tbody td {
  font-size: 16px;
}
table.blueTable tr:nth-child(even) {
  background: #D0E4F5;
}
table.blueTable thead {
  background: #3077A4;
  background: -moz-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: -webkit-linear-gradient(top, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  background: linear-gradient(to bottom, #6499bb 0%, #4484ad 66%, #3077A4 100%);
  border-bottom: 2px solid #444444;
}
table.blueTable thead th {
  font-size: 15px;
  font-weight: bold;
  color: #FFFFFF;
  text-align: center;
  border-left: 2px solid #D0E4F5;
}
table.blueTable thead th:first-child {
  border-left: none;
}
table.blueTable tfoot {
  font-size: 8px;
  font-weight: bold;
  color: #FFFFFF;
  background: #D0E4F5;
  background: -moz-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: -webkit-linear-gradient(top, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  background: linear-gradient(to bottom, #dcebf7 0%, #d4e6f6 66%, #D0E4F5 100%);
  border-top: 2px solid #444444;
}
table.blueTable tfoot td {
  font-size: 8px;
}
table.blueTable tfoot .links {
  text-align: right;
}
table.blueTable tfoot .links a{
  display: inline-block;
  background: #1C6EA4;
  color: #FFFFFF;
  padding: 2px 8px;
  border-radius: 5px;
}
body{
    background: #fff2e0;
}
.Metadata {
    margin-bottom: 15px;
}
.u-monospace {
    font-family: 'Source Code Pro',monospace;
    max-width: 100%;
    overflow-x: scroll;
    border: groove #c33b3b 2px;
}
.MetadataMessage {
    background-color: #b9caff;
    border: 1px solid #de5353;
    color: #000;
    margin: 0;
    padding: 12px;
    white-space: pre-wrap;
}
</style>
</head>
<body>

    <table class="blueTable">
     <thead>
      <tr>
       <th><strong>REVISION ID</strong></th>
       <th>SHA-1 COMMIT</th>
      </tr>
    </thead>
    <tfoot></tfoot>
     <tbody>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Mac/1368605/"> 1368605</a> <sup><b>(MAC)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa">ba51c2ee3ae2c58000e1e55fc2808276c38b64fa</a></td>
      </tr>
      <tr>
       <td><a href ="https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win/1368596/">1368596</a> <sup><b>(WIN)</b></sup></td>
       <td><a href="https://chromium.googlesource.com/chromium/src/+/f53c733dfa11ce82415775956657dbb2b1b63d26">f53c733dfa11ce82415775956657dbb2b1b63d26</a></td>
     </tbody>
    </table>
   <hr><table>
 <tr>
  <th class="Metadata-title">
   commit
  </th>
  <td>
   ba51c2ee3ae2c58000e1e55fc2808276c38b64fa
  </td>
  <td>
   <span>
    [
    <a href="/chromium/src/+log/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa">
     log
    </a>
    ]
   </span>
   <span>
    [
    <a href="/chromium/src/+archive/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa.tar.gz">
     tgz
    </a>
    ]
   </span>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   author
  </th>
  <td>
   Erik Chen &lt;erikchen@chromium.org&gt;
  </td>
  <td>
   Tue Oct 15 05:49:14 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   committer
  </th>
  <td>
   Chromium LUCI CQ &lt;chromium-scoped@luci-project-accounts.iam.gserviceaccount.com&gt;
  </td>
  <td>
   Tue Oct 15 05:49:14 2024
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   tree
  </th>
  <td>
   <a href="/chromium/src/+/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa/">
    46e4920653e9e67574d5e312f92afbeebf7f2fae
   </a>
  </td>
 </tr>
 <tr>
  <th class="Metadata-title">
   parent
  </th>
  <td>
   <a href="/chromium/src/+/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa%5E">
    de1b4c92902e04e4b6c862c39b21fb773ba58bab
   </a>
   <span>
    [
    <a href="/chromium/src/+/ba51c2ee3ae2c58000e1e55fc2808276c38b64fa%5E%21/">
     diff
    </a>
    ]
   </span>
  </td>
 </tr>
</table>
<hr style="height:1px;border-width:0;color:gray;background-color:gray"><pre class="u-pre u-monospace MetadataMessage">Fix PWA metrics (part 2 / N).

This CL is a refactor with no intended user-visible change.

This CL changes the timing of WebAppTabHelper construction from
TabHelpers::AttachTabHelpers to TabFeatures::Init.

This has the following side effects:
* Several feature-specific callsites were lazily creating
  WebAppTabHelper. This is wrong. Either the tab helper should already
  exist, along with other helpers like WebAppMetricsTabHelper, or the
  feature should not be trying to access web-app functionality on a
  WebContents that is not a web-app. This CL wraps the code behind a
  conditional and removes the lazy construction.
* The test WebAppAudioFocusBrowserTest.AppHasDifferentAudioFocus had one
  expectation based on cloning a app-browser web contents. This cannot
  happen in practice, and thus this portion of the test was deleted.

Change-Id: <a href="https://chromium-review.googlesource.com/#/q/I97ce3cc8461f3fba291d8c4688c6509e99d67907">I97ce3cc8461f3fba291d8c4688c6509e99d67907</a>
Reviewed-on: <a href="https://chromium-review.googlesource.com/c/chromium/src/+/5914715">https://chromium-review.googlesource.com/c/chromium/src/+/5914715</a>
Reviewed-by: Daniel Murphy &lt;dmurph@chromium.org&gt;
Commit-Queue: Erik Chen &lt;erikchen@chromium.org&gt;
Cr-Commit-Position: refs/heads/main@{#1368605}
</pre>

</body>
</html>
